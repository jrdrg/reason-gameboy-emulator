// Generated by BUCKLESCRIPT VERSION 4.0.18, PLEASE EDIT WITH CARE
'use strict';

var Block = require("bs-platform/lib/js/block.js");
var Curry = require("bs-platform/lib/js/curry.js");
var Printf = require("bs-platform/lib/js/printf.js");
var Pervasives = require("bs-platform/lib/js/pervasives.js");
var Belt_Option = require("bs-platform/lib/js/belt_Option.js");
var Caml_option = require("bs-platform/lib/js/caml_option.js");
var Caml_exceptions = require("bs-platform/lib/js/caml_exceptions.js");
var Mmu$GameboyEmulator = require("./Mmu.bs.js");

var UnhandledInstruction = Caml_exceptions.create("Cpu-GameboyEmulator.UnhandledInstruction");

var AssertionException = Caml_exceptions.create("Cpu-GameboyEmulator.AssertionException");

function flagOffset(flag) {
  switch (flag) {
    case 0 : 
        return 7;
    case 1 : 
        return 6;
    case 2 : 
        return 5;
    case 3 : 
        return 4;
    
  }
}

function setFlag(flag, value, flags) {
  var bit = (1 << flagOffset(flag));
  if (value !== 0) {
    return flags | bit;
  } else {
    return flags & Pervasives.lnot(bit);
  }
}

function getFlag(flag, flags) {
  var offset = flagOffset(flag);
  var flag$1 = flags & (1 << offset);
  return (flag$1 >>> offset) | 0;
}

function isSet(flag, flags) {
  var offset = flagOffset(flag);
  return (flags & (1 << offset)) > 0;
}

var Flags = /* module */[
  /* z */7,
  /* n */6,
  /* h */5,
  /* c */4,
  /* flagOffset */flagOffset,
  /* setFlag */setFlag,
  /* getFlag */getFlag,
  /* isSet */isSet
];

function make(param) {
  return /* record */[
          /* clock */0,
          /* halt */0,
          /* registers : record */[
            /* a */0,
            /* b */0,
            /* c */0,
            /* d */0,
            /* e */0,
            /* h */0,
            /* l */0,
            /* f */0,
            /* sp */0,
            /* pc */0,
            /* mCycles */0
          ]
        ];
}

function b2i(bool) {
  if (bool) {
    return 1;
  } else {
    return 0;
  }
}

function programCount(cpu) {
  return cpu[/* registers */2][/* pc */9];
}

function readRegister16(register, param) {
  var match = param[/* registers */2];
  var a = match[/* a */0];
  var b = match[/* b */1];
  var c = match[/* c */2];
  var d = match[/* d */3];
  var e = match[/* e */4];
  var h = match[/* h */5];
  var l = match[/* l */6];
  var f = match[/* f */7];
  var match$1;
  switch (register) {
    case 0 : 
        match$1 = /* tuple */[
          a,
          f
        ];
        break;
    case 1 : 
        match$1 = /* tuple */[
          b,
          c
        ];
        break;
    case 2 : 
        match$1 = /* tuple */[
          d,
          e
        ];
        break;
    case 3 : 
        match$1 = /* tuple */[
          h,
          l
        ];
        break;
    
  }
  return match$1[1] + (match$1[0] << 8) | 0;
}

function rAf(param) {
  return readRegister16(/* AF */0, param);
}

function rBc(param) {
  return readRegister16(/* BC */1, param);
}

function rDe(param) {
  return readRegister16(/* DE */2, param);
}

function rHl(param) {
  return readRegister16(/* HL */3, param);
}

function checkRegister(register) {
  if (register > 255) {
    throw [
          AssertionException,
          String(register)
        ];
  } else {
    return 0;
  }
}

function setRegisters(a, b, c, d, e, h, l, f, cpu) {
  var registers = cpu[/* registers */2];
  registers[/* a */0] = Belt_Option.getWithDefault(a, registers[/* a */0]);
  registers[/* b */1] = Belt_Option.getWithDefault(b, registers[/* b */1]);
  registers[/* c */2] = Belt_Option.getWithDefault(c, registers[/* c */2]);
  registers[/* d */3] = Belt_Option.getWithDefault(d, registers[/* d */3]);
  registers[/* e */4] = Belt_Option.getWithDefault(e, registers[/* e */4]);
  registers[/* h */5] = Belt_Option.getWithDefault(h, registers[/* h */5]);
  registers[/* l */6] = Belt_Option.getWithDefault(l, registers[/* l */6]);
  registers[/* f */7] = Belt_Option.getWithDefault(f, registers[/* f */7]);
  checkRegister(registers[/* a */0]);
  checkRegister(registers[/* b */1]);
  checkRegister(registers[/* c */2]);
  checkRegister(registers[/* d */3]);
  checkRegister(registers[/* e */4]);
  checkRegister(registers[/* h */5]);
  checkRegister(registers[/* l */6]);
  return cpu;
}

function writeRegister16(register, value, cpu) {
  if (value > 65535) {
    throw [
          AssertionException,
          Curry._1(Printf.sprintf(/* Format */[
                    /* String_literal */Block.__(11, [
                        "writeRegister16 ",
                        /* Int */Block.__(4, [
                            /* Int_d */0,
                            /* No_padding */0,
                            /* No_precision */0,
                            /* End_of_format */0
                          ])
                      ]),
                    "writeRegister16 %d"
                  ]), value)
        ];
  }
  var r1 = (value >>> 8) & 255;
  var r2 = value & 255;
  switch (register) {
    case 0 : 
        var arg = r2;
        var arg$1 = function (param, param$1, param$2, param$3, param$4, param$5) {
          var partial_arg = r1;
          return (function (param$6) {
              return setRegisters(partial_arg, param, param$1, param$2, param$3, param$4, param$5, arg, param$6);
            });
        };
        return (function (eta) {
                    return arg$1(undefined, undefined, undefined, undefined, undefined, undefined)(eta);
                  })(cpu);
    case 1 : 
        var arg$2 = r1;
        var arg$3 = r2;
        return (function (param) {
                      return (function (param$1, param$2, param$3, param$4, param$5, param$6) {
                          return setRegisters(param, arg$2, arg$3, param$1, param$2, param$3, param$4, param$5, param$6);
                        });
                    })(undefined)(undefined, undefined, undefined, undefined, undefined, cpu);
    case 2 : 
        var arg$4 = r1;
        var arg$5 = r2;
        return (function (param, param$1, param$2) {
                      return (function (param$3, param$4, param$5, param$6) {
                          return setRegisters(param, param$1, param$2, arg$4, arg$5, param$3, param$4, param$5, param$6);
                        });
                    })(undefined, undefined, undefined)(undefined, undefined, undefined, cpu);
    case 3 : 
        var arg$6 = r1;
        var arg$7 = r2;
        return (function (param, param$1, param$2, param$3, param$4) {
                      return (function (param$5, param$6) {
                          return setRegisters(param, param$1, param$2, param$3, param$4, arg$6, arg$7, param$5, param$6);
                        });
                    })(undefined, undefined, undefined, undefined, undefined)(undefined, cpu);
    
  }
}

function wHl(param, param$1) {
  return writeRegister16(/* HL */3, param, param$1);
}

function incrementPc(cycles, cpu) {
  cpu[/* registers */2][/* pc */9] = cpu[/* registers */2][/* pc */9] + cycles | 0;
  return cpu;
}

function setPc(pc, cpu) {
  cpu[/* registers */2][/* pc */9] = pc;
  return cpu;
}

function incrementSp($staropt$star, cpu) {
  var amount = $staropt$star !== undefined ? $staropt$star : 1;
  cpu[/* registers */2][/* sp */8] = cpu[/* registers */2][/* sp */8] + amount & 65535;
  return cpu;
}

function decrementSp($staropt$star, cpu) {
  var amount = $staropt$star !== undefined ? $staropt$star : 1;
  cpu[/* registers */2][/* sp */8] = cpu[/* registers */2][/* sp */8] - amount & 65535;
  return cpu;
}

function setSp(sp, cpu) {
  cpu[/* registers */2][/* sp */8] = sp & 65535;
  return cpu;
}

function getFlag$1(flag, cpu) {
  var bit = (1 << flagOffset(flag));
  return cpu[/* registers */2][/* f */7] & bit;
}

function setFlag$1(flag, value, initialValue, cpu) {
  cpu[/* registers */2][/* f */7] = setFlag(flag, value, Belt_Option.getWithDefault(initialValue, cpu[/* registers */2][/* f */7]));
  return cpu;
}

function toggleFlag(flag, cpu) {
  var flagValue = getFlag(flag, cpu[/* registers */2][/* f */7]) === 0 ? 1 : 0;
  var f = setFlag(flag, flagValue, cpu[/* registers */2][/* f */7]);
  var arg = f;
  return (function (param, param$1, param$2, param$3, param$4, param$5, param$6) {
                return (function (param$7) {
                    return setRegisters(param, param$1, param$2, param$3, param$4, param$5, param$6, arg, param$7);
                  });
              })(undefined, undefined, undefined, undefined, undefined, undefined, undefined)(cpu);
}

function machineCycles(cycles, cpu) {
  cpu[/* registers */2][/* mCycles */10] = cycles;
  return cpu;
}

function cycles(cycles$1, cpu) {
  return machineCycles(cycles$1 / 4 | 0, cpu);
}

function incrementHl(cpu) {
  var l = cpu[/* registers */2][/* l */6] + 1 & 255;
  var h = l === 0 ? cpu[/* registers */2][/* h */5] + 1 & 255 : cpu[/* registers */2][/* h */5];
  var arg = h;
  var arg$1 = l;
  return (function (param, param$1, param$2, param$3, param$4) {
                return (function (param$5, param$6) {
                    return setRegisters(param, param$1, param$2, param$3, param$4, arg, arg$1, param$5, param$6);
                  });
              })(undefined, undefined, undefined, undefined, undefined)(undefined, cpu);
}

function decrementHl(cpu) {
  var l = cpu[/* registers */2][/* l */6] - 1 & 255;
  var h = l === 255 ? cpu[/* registers */2][/* h */5] - 1 & 255 : cpu[/* registers */2][/* h */5];
  var arg = h;
  var arg$1 = l;
  return (function (param, param$1, param$2, param$3, param$4) {
                return (function (param$5, param$6) {
                    return setRegisters(param, param$1, param$2, param$3, param$4, arg, arg$1, param$5, param$6);
                  });
              })(undefined, undefined, undefined, undefined, undefined)(undefined, cpu);
}

function signed(value) {
  var match = value > 127;
  if (match) {
    return -(Pervasives.lnot(value) + 1 & 255) | 0;
  } else {
    return value;
  }
}

function newState(cpu, mmu, gpu, old) {
  return /* record */[
          /* cpu */Belt_Option.getWithDefault(cpu, old[/* cpu */0]),
          /* mmu */Belt_Option.getWithDefault(mmu, old[/* mmu */1]),
          /* gpu */Belt_Option.getWithDefault(gpu, old[/* gpu */2])
        ];
}

function nop(s) {
  return newState(machineCycles(1, s[/* cpu */0]), undefined, undefined, s);
}

function ld_b_n(s) {
  var cpu = s[/* cpu */0];
  var pc = cpu[/* registers */2][/* pc */9];
  var match = Mmu$GameboyEmulator.read8(pc, /* record */[
        /* gpu */s[/* gpu */2],
        /* mmu */s[/* mmu */1]
      ]);
  var arg = match[0];
  return newState(incrementPc(1, machineCycles(2, (function (param) {
                            return (function (param$1, param$2, param$3, param$4, param$5, param$6, param$7) {
                                return setRegisters(param, arg, param$1, param$2, param$3, param$4, param$5, param$6, param$7);
                              });
                          })(undefined)(undefined, undefined, undefined, undefined, undefined, undefined, cpu))), Caml_option.some(match[1]), undefined, s);
}

function ld_c_n(s) {
  var cpu = s[/* cpu */0];
  var pc = cpu[/* registers */2][/* pc */9];
  var match = Mmu$GameboyEmulator.read8(pc, /* record */[
        /* gpu */s[/* gpu */2],
        /* mmu */s[/* mmu */1]
      ]);
  var arg = match[0];
  return newState(incrementPc(1, machineCycles(2, (function (param, param$1) {
                            return (function (param$2, param$3, param$4, param$5, param$6, param$7) {
                                return setRegisters(param, param$1, arg, param$2, param$3, param$4, param$5, param$6, param$7);
                              });
                          })(undefined, undefined)(undefined, undefined, undefined, undefined, undefined, cpu))), Caml_option.some(match[1]), undefined, s);
}

function ld_d_n(s) {
  var cpu = s[/* cpu */0];
  var pc = cpu[/* registers */2][/* pc */9];
  var match = Mmu$GameboyEmulator.read8(pc, /* record */[
        /* gpu */s[/* gpu */2],
        /* mmu */s[/* mmu */1]
      ]);
  var arg = match[0];
  return newState(incrementPc(1, machineCycles(2, (function (param, param$1, param$2) {
                            return (function (param$3, param$4, param$5, param$6, param$7) {
                                return setRegisters(param, param$1, param$2, arg, param$3, param$4, param$5, param$6, param$7);
                              });
                          })(undefined, undefined, undefined)(undefined, undefined, undefined, undefined, cpu))), Caml_option.some(match[1]), undefined, s);
}

function ld_e_n(s) {
  var cpu = s[/* cpu */0];
  var pc = cpu[/* registers */2][/* pc */9];
  var match = Mmu$GameboyEmulator.read8(pc, /* record */[
        /* gpu */s[/* gpu */2],
        /* mmu */s[/* mmu */1]
      ]);
  var arg = match[0];
  return newState(incrementPc(1, machineCycles(2, (function (param, param$1, param$2, param$3) {
                            return (function (param$4, param$5, param$6, param$7) {
                                return setRegisters(param, param$1, param$2, param$3, arg, param$4, param$5, param$6, param$7);
                              });
                          })(undefined, undefined, undefined, undefined)(undefined, undefined, undefined, cpu))), Caml_option.some(match[1]), undefined, s);
}

function ld_h_n(s) {
  var cpu = s[/* cpu */0];
  var pc = cpu[/* registers */2][/* pc */9];
  var match = Mmu$GameboyEmulator.read8(pc, /* record */[
        /* gpu */s[/* gpu */2],
        /* mmu */s[/* mmu */1]
      ]);
  var arg = match[0];
  return newState(incrementPc(1, machineCycles(2, (function (param, param$1, param$2, param$3, param$4) {
                            return (function (param$5, param$6, param$7) {
                                return setRegisters(param, param$1, param$2, param$3, param$4, arg, param$5, param$6, param$7);
                              });
                          })(undefined, undefined, undefined, undefined, undefined)(undefined, undefined, cpu))), Caml_option.some(match[1]), undefined, s);
}

function ld_l_n(s) {
  var cpu = s[/* cpu */0];
  var pc = cpu[/* registers */2][/* pc */9];
  var match = Mmu$GameboyEmulator.read8(pc, /* record */[
        /* gpu */s[/* gpu */2],
        /* mmu */s[/* mmu */1]
      ]);
  var arg = match[0];
  return newState(incrementPc(1, machineCycles(2, (function (param, param$1, param$2, param$3, param$4, param$5) {
                            return (function (param$6, param$7) {
                                return setRegisters(param, param$1, param$2, param$3, param$4, param$5, arg, param$6, param$7);
                              });
                          })(undefined, undefined, undefined, undefined, undefined, undefined)(undefined, cpu))), Caml_option.some(match[1]), undefined, s);
}

var Load_nn_8 = /* module */[
  /* ld_b_n */ld_b_n,
  /* ld_c_n */ld_c_n,
  /* ld_d_n */ld_d_n,
  /* ld_e_n */ld_e_n,
  /* ld_h_n */ld_h_n,
  /* ld_l_n */ld_l_n
];

function ld_b_b(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var b = match[/* b */1];
  var eta = machineCycles(1, cpu);
  var arg = b;
  return newState((function (param) {
                    return (function (param$1, param$2, param$3, param$4, param$5, param$6, param$7) {
                        return setRegisters(param, arg, param$1, param$2, param$3, param$4, param$5, param$6, param$7);
                      });
                  })(undefined)(undefined, undefined, undefined, undefined, undefined, undefined, eta), undefined, undefined, s);
}

function ld_b_c(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var c = match[/* c */2];
  var eta = machineCycles(1, cpu);
  var arg = c;
  return newState((function (param) {
                    return (function (param$1, param$2, param$3, param$4, param$5, param$6, param$7) {
                        return setRegisters(param, arg, param$1, param$2, param$3, param$4, param$5, param$6, param$7);
                      });
                  })(undefined)(undefined, undefined, undefined, undefined, undefined, undefined, eta), undefined, undefined, s);
}

function ld_b_d(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var d = match[/* d */3];
  var eta = machineCycles(1, cpu);
  var arg = d;
  return newState((function (param) {
                    return (function (param$1, param$2, param$3, param$4, param$5, param$6, param$7) {
                        return setRegisters(param, arg, param$1, param$2, param$3, param$4, param$5, param$6, param$7);
                      });
                  })(undefined)(undefined, undefined, undefined, undefined, undefined, undefined, eta), undefined, undefined, s);
}

function ld_b_e(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var e = match[/* e */4];
  var eta = machineCycles(1, cpu);
  var arg = e;
  return newState((function (param) {
                    return (function (param$1, param$2, param$3, param$4, param$5, param$6, param$7) {
                        return setRegisters(param, arg, param$1, param$2, param$3, param$4, param$5, param$6, param$7);
                      });
                  })(undefined)(undefined, undefined, undefined, undefined, undefined, undefined, eta), undefined, undefined, s);
}

function ld_b_h(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var h = match[/* h */5];
  var eta = machineCycles(1, cpu);
  var arg = h;
  return newState((function (param) {
                    return (function (param$1, param$2, param$3, param$4, param$5, param$6, param$7) {
                        return setRegisters(param, arg, param$1, param$2, param$3, param$4, param$5, param$6, param$7);
                      });
                  })(undefined)(undefined, undefined, undefined, undefined, undefined, undefined, eta), undefined, undefined, s);
}

function ld_b_l(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var l = match[/* l */6];
  var eta = machineCycles(1, cpu);
  var arg = l;
  return newState((function (param) {
                    return (function (param$1, param$2, param$3, param$4, param$5, param$6, param$7) {
                        return setRegisters(param, arg, param$1, param$2, param$3, param$4, param$5, param$6, param$7);
                      });
                  })(undefined)(undefined, undefined, undefined, undefined, undefined, undefined, eta), undefined, undefined, s);
}

function ld_b_m_hl(s) {
  var cpu = s[/* cpu */0];
  var match = Mmu$GameboyEmulator.read8(rHl(cpu), /* record */[
        /* gpu */s[/* gpu */2],
        /* mmu */s[/* mmu */1]
      ]);
  var eta = machineCycles(2, cpu);
  var arg = match[0];
  return newState((function (param) {
                    return (function (param$1, param$2, param$3, param$4, param$5, param$6, param$7) {
                        return setRegisters(param, arg, param$1, param$2, param$3, param$4, param$5, param$6, param$7);
                      });
                  })(undefined)(undefined, undefined, undefined, undefined, undefined, undefined, eta), Caml_option.some(match[1]), undefined, s);
}

function ld_c_b(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var b = match[/* b */1];
  var eta = machineCycles(1, cpu);
  var arg = b;
  return newState((function (param, param$1) {
                    return (function (param$2, param$3, param$4, param$5, param$6, param$7) {
                        return setRegisters(param, param$1, arg, param$2, param$3, param$4, param$5, param$6, param$7);
                      });
                  })(undefined, undefined)(undefined, undefined, undefined, undefined, undefined, eta), undefined, undefined, s);
}

function ld_c_c(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var c = match[/* c */2];
  var eta = machineCycles(1, cpu);
  var arg = c;
  return newState((function (param, param$1) {
                    return (function (param$2, param$3, param$4, param$5, param$6, param$7) {
                        return setRegisters(param, param$1, arg, param$2, param$3, param$4, param$5, param$6, param$7);
                      });
                  })(undefined, undefined)(undefined, undefined, undefined, undefined, undefined, eta), undefined, undefined, s);
}

function ld_c_d(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var d = match[/* d */3];
  var eta = machineCycles(1, cpu);
  var arg = d;
  return newState((function (param, param$1) {
                    return (function (param$2, param$3, param$4, param$5, param$6, param$7) {
                        return setRegisters(param, param$1, arg, param$2, param$3, param$4, param$5, param$6, param$7);
                      });
                  })(undefined, undefined)(undefined, undefined, undefined, undefined, undefined, eta), undefined, undefined, s);
}

function ld_c_e(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var e = match[/* e */4];
  var eta = machineCycles(1, cpu);
  var arg = e;
  return newState((function (param, param$1) {
                    return (function (param$2, param$3, param$4, param$5, param$6, param$7) {
                        return setRegisters(param, param$1, arg, param$2, param$3, param$4, param$5, param$6, param$7);
                      });
                  })(undefined, undefined)(undefined, undefined, undefined, undefined, undefined, eta), undefined, undefined, s);
}

function ld_c_h(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var h = match[/* h */5];
  var eta = machineCycles(1, cpu);
  var arg = h;
  return newState((function (param, param$1) {
                    return (function (param$2, param$3, param$4, param$5, param$6, param$7) {
                        return setRegisters(param, param$1, arg, param$2, param$3, param$4, param$5, param$6, param$7);
                      });
                  })(undefined, undefined)(undefined, undefined, undefined, undefined, undefined, eta), undefined, undefined, s);
}

function ld_c_l(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var l = match[/* l */6];
  var eta = machineCycles(1, cpu);
  var arg = l;
  return newState((function (param, param$1) {
                    return (function (param$2, param$3, param$4, param$5, param$6, param$7) {
                        return setRegisters(param, param$1, arg, param$2, param$3, param$4, param$5, param$6, param$7);
                      });
                  })(undefined, undefined)(undefined, undefined, undefined, undefined, undefined, eta), undefined, undefined, s);
}

function ld_c_m_hl(s) {
  var cpu = s[/* cpu */0];
  var match = Mmu$GameboyEmulator.read8(rHl(cpu), /* record */[
        /* gpu */s[/* gpu */2],
        /* mmu */s[/* mmu */1]
      ]);
  var eta = machineCycles(2, cpu);
  var arg = match[0];
  return newState((function (param, param$1) {
                    return (function (param$2, param$3, param$4, param$5, param$6, param$7) {
                        return setRegisters(param, param$1, arg, param$2, param$3, param$4, param$5, param$6, param$7);
                      });
                  })(undefined, undefined)(undefined, undefined, undefined, undefined, undefined, eta), Caml_option.some(match[1]), undefined, s);
}

function ld_d_b(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var b = match[/* b */1];
  var eta = machineCycles(1, cpu);
  var arg = b;
  return newState((function (param, param$1, param$2) {
                    return (function (param$3, param$4, param$5, param$6, param$7) {
                        return setRegisters(param, param$1, param$2, arg, param$3, param$4, param$5, param$6, param$7);
                      });
                  })(undefined, undefined, undefined)(undefined, undefined, undefined, undefined, eta), undefined, undefined, s);
}

function ld_d_c(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var c = match[/* c */2];
  var eta = machineCycles(1, cpu);
  var arg = c;
  return newState((function (param, param$1, param$2) {
                    return (function (param$3, param$4, param$5, param$6, param$7) {
                        return setRegisters(param, param$1, param$2, arg, param$3, param$4, param$5, param$6, param$7);
                      });
                  })(undefined, undefined, undefined)(undefined, undefined, undefined, undefined, eta), undefined, undefined, s);
}

function ld_d_d(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var d = match[/* d */3];
  var eta = machineCycles(1, cpu);
  var arg = d;
  return newState((function (param, param$1, param$2) {
                    return (function (param$3, param$4, param$5, param$6, param$7) {
                        return setRegisters(param, param$1, param$2, arg, param$3, param$4, param$5, param$6, param$7);
                      });
                  })(undefined, undefined, undefined)(undefined, undefined, undefined, undefined, eta), undefined, undefined, s);
}

function ld_d_e(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var e = match[/* e */4];
  var eta = machineCycles(1, cpu);
  var arg = e;
  return newState((function (param, param$1, param$2) {
                    return (function (param$3, param$4, param$5, param$6, param$7) {
                        return setRegisters(param, param$1, param$2, arg, param$3, param$4, param$5, param$6, param$7);
                      });
                  })(undefined, undefined, undefined)(undefined, undefined, undefined, undefined, eta), undefined, undefined, s);
}

function ld_d_h(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var h = match[/* h */5];
  var eta = machineCycles(1, cpu);
  var arg = h;
  return newState((function (param, param$1, param$2) {
                    return (function (param$3, param$4, param$5, param$6, param$7) {
                        return setRegisters(param, param$1, param$2, arg, param$3, param$4, param$5, param$6, param$7);
                      });
                  })(undefined, undefined, undefined)(undefined, undefined, undefined, undefined, eta), undefined, undefined, s);
}

function ld_d_l(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var l = match[/* l */6];
  var eta = machineCycles(1, cpu);
  var arg = l;
  return newState((function (param, param$1, param$2) {
                    return (function (param$3, param$4, param$5, param$6, param$7) {
                        return setRegisters(param, param$1, param$2, arg, param$3, param$4, param$5, param$6, param$7);
                      });
                  })(undefined, undefined, undefined)(undefined, undefined, undefined, undefined, eta), undefined, undefined, s);
}

function ld_d_m_hl(s) {
  var cpu = s[/* cpu */0];
  var match = Mmu$GameboyEmulator.read8(rHl(cpu), /* record */[
        /* gpu */s[/* gpu */2],
        /* mmu */s[/* mmu */1]
      ]);
  var eta = machineCycles(2, cpu);
  var arg = match[0];
  return newState((function (param, param$1, param$2) {
                    return (function (param$3, param$4, param$5, param$6, param$7) {
                        return setRegisters(param, param$1, param$2, arg, param$3, param$4, param$5, param$6, param$7);
                      });
                  })(undefined, undefined, undefined)(undefined, undefined, undefined, undefined, eta), Caml_option.some(match[1]), undefined, s);
}

function ld_e_b(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var b = match[/* b */1];
  var eta = machineCycles(1, cpu);
  var arg = b;
  return newState((function (param, param$1, param$2, param$3) {
                    return (function (param$4, param$5, param$6, param$7) {
                        return setRegisters(param, param$1, param$2, param$3, arg, param$4, param$5, param$6, param$7);
                      });
                  })(undefined, undefined, undefined, undefined)(undefined, undefined, undefined, eta), undefined, undefined, s);
}

function ld_e_c(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var c = match[/* c */2];
  var eta = machineCycles(1, cpu);
  var arg = c;
  return newState((function (param, param$1, param$2, param$3) {
                    return (function (param$4, param$5, param$6, param$7) {
                        return setRegisters(param, param$1, param$2, param$3, arg, param$4, param$5, param$6, param$7);
                      });
                  })(undefined, undefined, undefined, undefined)(undefined, undefined, undefined, eta), undefined, undefined, s);
}

function ld_e_d(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var d = match[/* d */3];
  var eta = machineCycles(1, cpu);
  var arg = d;
  return newState((function (param, param$1, param$2, param$3) {
                    return (function (param$4, param$5, param$6, param$7) {
                        return setRegisters(param, param$1, param$2, param$3, arg, param$4, param$5, param$6, param$7);
                      });
                  })(undefined, undefined, undefined, undefined)(undefined, undefined, undefined, eta), undefined, undefined, s);
}

function ld_e_e(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var e = match[/* e */4];
  var eta = machineCycles(1, cpu);
  var arg = e;
  return newState((function (param, param$1, param$2, param$3) {
                    return (function (param$4, param$5, param$6, param$7) {
                        return setRegisters(param, param$1, param$2, param$3, arg, param$4, param$5, param$6, param$7);
                      });
                  })(undefined, undefined, undefined, undefined)(undefined, undefined, undefined, eta), undefined, undefined, s);
}

function ld_e_h(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var h = match[/* h */5];
  var eta = machineCycles(1, cpu);
  var arg = h;
  return newState((function (param, param$1, param$2, param$3) {
                    return (function (param$4, param$5, param$6, param$7) {
                        return setRegisters(param, param$1, param$2, param$3, arg, param$4, param$5, param$6, param$7);
                      });
                  })(undefined, undefined, undefined, undefined)(undefined, undefined, undefined, eta), undefined, undefined, s);
}

function ld_e_l(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var l = match[/* l */6];
  var eta = machineCycles(1, cpu);
  var arg = l;
  return newState((function (param, param$1, param$2, param$3) {
                    return (function (param$4, param$5, param$6, param$7) {
                        return setRegisters(param, param$1, param$2, param$3, arg, param$4, param$5, param$6, param$7);
                      });
                  })(undefined, undefined, undefined, undefined)(undefined, undefined, undefined, eta), undefined, undefined, s);
}

function ld_e_m_hl(s) {
  var cpu = s[/* cpu */0];
  var match = Mmu$GameboyEmulator.read8(rHl(cpu), /* record */[
        /* gpu */s[/* gpu */2],
        /* mmu */s[/* mmu */1]
      ]);
  var eta = machineCycles(2, cpu);
  var arg = match[0];
  return newState((function (param, param$1, param$2, param$3) {
                    return (function (param$4, param$5, param$6, param$7) {
                        return setRegisters(param, param$1, param$2, param$3, arg, param$4, param$5, param$6, param$7);
                      });
                  })(undefined, undefined, undefined, undefined)(undefined, undefined, undefined, eta), Caml_option.some(match[1]), undefined, s);
}

function ld_h_b(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var b = match[/* b */1];
  var eta = machineCycles(1, cpu);
  var arg = b;
  return newState((function (param, param$1, param$2, param$3, param$4) {
                    return (function (param$5, param$6, param$7) {
                        return setRegisters(param, param$1, param$2, param$3, param$4, arg, param$5, param$6, param$7);
                      });
                  })(undefined, undefined, undefined, undefined, undefined)(undefined, undefined, eta), undefined, undefined, s);
}

function ld_h_c(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var c = match[/* c */2];
  var eta = machineCycles(1, cpu);
  var arg = c;
  return newState((function (param, param$1, param$2, param$3, param$4) {
                    return (function (param$5, param$6, param$7) {
                        return setRegisters(param, param$1, param$2, param$3, param$4, arg, param$5, param$6, param$7);
                      });
                  })(undefined, undefined, undefined, undefined, undefined)(undefined, undefined, eta), undefined, undefined, s);
}

function ld_h_d(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var d = match[/* d */3];
  var eta = machineCycles(1, cpu);
  var arg = d;
  return newState((function (param, param$1, param$2, param$3, param$4) {
                    return (function (param$5, param$6, param$7) {
                        return setRegisters(param, param$1, param$2, param$3, param$4, arg, param$5, param$6, param$7);
                      });
                  })(undefined, undefined, undefined, undefined, undefined)(undefined, undefined, eta), undefined, undefined, s);
}

function ld_h_e(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var e = match[/* e */4];
  var eta = machineCycles(1, cpu);
  var arg = e;
  return newState((function (param, param$1, param$2, param$3, param$4) {
                    return (function (param$5, param$6, param$7) {
                        return setRegisters(param, param$1, param$2, param$3, param$4, arg, param$5, param$6, param$7);
                      });
                  })(undefined, undefined, undefined, undefined, undefined)(undefined, undefined, eta), undefined, undefined, s);
}

function ld_h_h(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var h = match[/* h */5];
  var eta = machineCycles(1, cpu);
  var arg = h;
  return newState((function (param, param$1, param$2, param$3, param$4) {
                    return (function (param$5, param$6, param$7) {
                        return setRegisters(param, param$1, param$2, param$3, param$4, arg, param$5, param$6, param$7);
                      });
                  })(undefined, undefined, undefined, undefined, undefined)(undefined, undefined, eta), undefined, undefined, s);
}

function ld_h_l(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var l = match[/* l */6];
  var eta = machineCycles(1, cpu);
  var arg = l;
  return newState((function (param, param$1, param$2, param$3, param$4) {
                    return (function (param$5, param$6, param$7) {
                        return setRegisters(param, param$1, param$2, param$3, param$4, arg, param$5, param$6, param$7);
                      });
                  })(undefined, undefined, undefined, undefined, undefined)(undefined, undefined, eta), undefined, undefined, s);
}

function ld_h_m_hl(s) {
  var cpu = s[/* cpu */0];
  var match = Mmu$GameboyEmulator.read8(rHl(cpu), /* record */[
        /* gpu */s[/* gpu */2],
        /* mmu */s[/* mmu */1]
      ]);
  var eta = machineCycles(2, cpu);
  var arg = match[0];
  return newState((function (param, param$1, param$2, param$3, param$4) {
                    return (function (param$5, param$6, param$7) {
                        return setRegisters(param, param$1, param$2, param$3, param$4, arg, param$5, param$6, param$7);
                      });
                  })(undefined, undefined, undefined, undefined, undefined)(undefined, undefined, eta), Caml_option.some(match[1]), undefined, s);
}

function ld_l_b(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var b = match[/* b */1];
  var eta = machineCycles(1, cpu);
  var arg = b;
  return newState((function (param, param$1, param$2, param$3, param$4, param$5) {
                    return (function (param$6, param$7) {
                        return setRegisters(param, param$1, param$2, param$3, param$4, param$5, arg, param$6, param$7);
                      });
                  })(undefined, undefined, undefined, undefined, undefined, undefined)(undefined, eta), undefined, undefined, s);
}

function ld_l_c(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var c = match[/* c */2];
  var eta = machineCycles(1, cpu);
  var arg = c;
  return newState((function (param, param$1, param$2, param$3, param$4, param$5) {
                    return (function (param$6, param$7) {
                        return setRegisters(param, param$1, param$2, param$3, param$4, param$5, arg, param$6, param$7);
                      });
                  })(undefined, undefined, undefined, undefined, undefined, undefined)(undefined, eta), undefined, undefined, s);
}

function ld_l_d(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var d = match[/* d */3];
  var eta = machineCycles(1, cpu);
  var arg = d;
  return newState((function (param, param$1, param$2, param$3, param$4, param$5) {
                    return (function (param$6, param$7) {
                        return setRegisters(param, param$1, param$2, param$3, param$4, param$5, arg, param$6, param$7);
                      });
                  })(undefined, undefined, undefined, undefined, undefined, undefined)(undefined, eta), undefined, undefined, s);
}

function ld_l_e(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var e = match[/* e */4];
  var eta = machineCycles(1, cpu);
  var arg = e;
  return newState((function (param, param$1, param$2, param$3, param$4, param$5) {
                    return (function (param$6, param$7) {
                        return setRegisters(param, param$1, param$2, param$3, param$4, param$5, arg, param$6, param$7);
                      });
                  })(undefined, undefined, undefined, undefined, undefined, undefined)(undefined, eta), undefined, undefined, s);
}

function ld_l_h(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var h = match[/* h */5];
  var eta = machineCycles(1, cpu);
  var arg = h;
  return newState((function (param, param$1, param$2, param$3, param$4, param$5) {
                    return (function (param$6, param$7) {
                        return setRegisters(param, param$1, param$2, param$3, param$4, param$5, arg, param$6, param$7);
                      });
                  })(undefined, undefined, undefined, undefined, undefined, undefined)(undefined, eta), undefined, undefined, s);
}

function ld_l_l(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var l = match[/* l */6];
  var eta = machineCycles(1, cpu);
  var arg = l;
  return newState((function (param, param$1, param$2, param$3, param$4, param$5) {
                    return (function (param$6, param$7) {
                        return setRegisters(param, param$1, param$2, param$3, param$4, param$5, arg, param$6, param$7);
                      });
                  })(undefined, undefined, undefined, undefined, undefined, undefined)(undefined, eta), undefined, undefined, s);
}

function ld_l_m_hl(s) {
  var cpu = s[/* cpu */0];
  var match = Mmu$GameboyEmulator.read8(rHl(cpu), /* record */[
        /* gpu */s[/* gpu */2],
        /* mmu */s[/* mmu */1]
      ]);
  var eta = machineCycles(2, cpu);
  var arg = match[0];
  return newState((function (param, param$1, param$2, param$3, param$4, param$5) {
                    return (function (param$6, param$7) {
                        return setRegisters(param, param$1, param$2, param$3, param$4, param$5, arg, param$6, param$7);
                      });
                  })(undefined, undefined, undefined, undefined, undefined, undefined)(undefined, eta), Caml_option.some(match[1]), undefined, s);
}

function ld_m_hl_8(register, param) {
  var cpu = param[/* cpu */0];
  var match = Mmu$GameboyEmulator.write8(rHl(cpu), register, /* record */[
        /* gpu */param[/* gpu */2],
        /* mmu */param[/* mmu */1]
      ]);
  return /* tuple */[
          machineCycles(2, cpu),
          match[0],
          match[1]
        ];
}

function ld_m_hl_b(s) {
  var match = ld_m_hl_8(s[/* cpu */0][/* registers */2][/* b */1], s);
  return newState(match[0], Caml_option.some(match[1]), match[2], s);
}

function ld_m_hl_c(s) {
  var match = ld_m_hl_8(s[/* cpu */0][/* registers */2][/* c */2], s);
  return newState(match[0], Caml_option.some(match[1]), match[2], s);
}

function ld_m_hl_d(s) {
  var match = ld_m_hl_8(s[/* cpu */0][/* registers */2][/* d */3], s);
  return newState(match[0], Caml_option.some(match[1]), match[2], s);
}

function ld_m_hl_e(s) {
  var match = ld_m_hl_8(s[/* cpu */0][/* registers */2][/* e */4], s);
  return newState(match[0], Caml_option.some(match[1]), match[2], s);
}

function ld_m_hl_h(s) {
  var match = ld_m_hl_8(s[/* cpu */0][/* registers */2][/* h */5], s);
  return newState(match[0], Caml_option.some(match[1]), match[2], s);
}

function ld_m_hl_l(s) {
  var match = ld_m_hl_8(s[/* cpu */0][/* registers */2][/* l */6], s);
  return newState(match[0], Caml_option.some(match[1]), match[2], s);
}

function ld_m_hl_n(s) {
  var gpu = s[/* gpu */2];
  var cpu = s[/* cpu */0];
  var match = Mmu$GameboyEmulator.read8(cpu[/* registers */2][/* pc */9], /* record */[
        /* gpu */gpu,
        /* mmu */s[/* mmu */1]
      ]);
  var match$1 = Mmu$GameboyEmulator.write8(rHl(cpu), match[0], /* record */[
        /* gpu */gpu,
        /* mmu */match[1]
      ]);
  return newState(incrementPc(1, machineCycles(3, cpu)), Caml_option.some(match$1[0]), match$1[1], s);
}

var Load_r1_r2 = /* module */[
  /* ld_b_b */ld_b_b,
  /* ld_b_c */ld_b_c,
  /* ld_b_d */ld_b_d,
  /* ld_b_e */ld_b_e,
  /* ld_b_h */ld_b_h,
  /* ld_b_l */ld_b_l,
  /* ld_b_m_hl */ld_b_m_hl,
  /* ld_c_b */ld_c_b,
  /* ld_c_c */ld_c_c,
  /* ld_c_d */ld_c_d,
  /* ld_c_e */ld_c_e,
  /* ld_c_h */ld_c_h,
  /* ld_c_l */ld_c_l,
  /* ld_c_m_hl */ld_c_m_hl,
  /* ld_d_b */ld_d_b,
  /* ld_d_c */ld_d_c,
  /* ld_d_d */ld_d_d,
  /* ld_d_e */ld_d_e,
  /* ld_d_h */ld_d_h,
  /* ld_d_l */ld_d_l,
  /* ld_d_m_hl */ld_d_m_hl,
  /* ld_e_b */ld_e_b,
  /* ld_e_c */ld_e_c,
  /* ld_e_d */ld_e_d,
  /* ld_e_e */ld_e_e,
  /* ld_e_h */ld_e_h,
  /* ld_e_l */ld_e_l,
  /* ld_e_m_hl */ld_e_m_hl,
  /* ld_h_b */ld_h_b,
  /* ld_h_c */ld_h_c,
  /* ld_h_d */ld_h_d,
  /* ld_h_e */ld_h_e,
  /* ld_h_h */ld_h_h,
  /* ld_h_l */ld_h_l,
  /* ld_h_m_hl */ld_h_m_hl,
  /* ld_l_b */ld_l_b,
  /* ld_l_c */ld_l_c,
  /* ld_l_d */ld_l_d,
  /* ld_l_e */ld_l_e,
  /* ld_l_h */ld_l_h,
  /* ld_l_l */ld_l_l,
  /* ld_l_m_hl */ld_l_m_hl,
  /* ld_m_hl_8 */ld_m_hl_8,
  /* ld_m_hl_b */ld_m_hl_b,
  /* ld_m_hl_c */ld_m_hl_c,
  /* ld_m_hl_d */ld_m_hl_d,
  /* ld_m_hl_e */ld_m_hl_e,
  /* ld_m_hl_h */ld_m_hl_h,
  /* ld_m_hl_l */ld_m_hl_l,
  /* ld_m_hl_n */ld_m_hl_n
];

function ld_n_nn(param) {
  var gpu = param[/* gpu */2];
  var cpu = param[/* cpu */0];
  var pc = cpu[/* registers */2][/* pc */9];
  var match = Mmu$GameboyEmulator.read8(pc, /* record */[
        /* gpu */gpu,
        /* mmu */param[/* mmu */1]
      ]);
  var match$1 = Mmu$GameboyEmulator.read8(pc + 1 | 0, /* record */[
        /* gpu */gpu,
        /* mmu */match[1]
      ]);
  return /* tuple */[
          match$1[0],
          match[0],
          match$1[1],
          incrementPc(2, machineCycles(3, cpu))
        ];
}

function ld_bc_nn(s) {
  var match = ld_n_nn(s);
  var arg = match[0];
  var arg$1 = match[1];
  return newState((function (param) {
                    return (function (param$1, param$2, param$3, param$4, param$5, param$6) {
                        return setRegisters(param, arg, arg$1, param$1, param$2, param$3, param$4, param$5, param$6);
                      });
                  })(undefined)(undefined, undefined, undefined, undefined, undefined, match[3]), Caml_option.some(match[2]), undefined, s);
}

function ld_de_nn(s) {
  var match = ld_n_nn(s);
  var arg = match[0];
  var arg$1 = match[1];
  return newState((function (param, param$1, param$2) {
                    return (function (param$3, param$4, param$5, param$6) {
                        return setRegisters(param, param$1, param$2, arg, arg$1, param$3, param$4, param$5, param$6);
                      });
                  })(undefined, undefined, undefined)(undefined, undefined, undefined, match[3]), Caml_option.some(match[2]), undefined, s);
}

function ld_hl_nn(s) {
  var match = ld_n_nn(s);
  var arg = match[0];
  var arg$1 = match[1];
  return newState((function (param, param$1, param$2, param$3, param$4) {
                    return (function (param$5, param$6) {
                        return setRegisters(param, param$1, param$2, param$3, param$4, arg, arg$1, param$5, param$6);
                      });
                  })(undefined, undefined, undefined, undefined, undefined)(undefined, match[3]), Caml_option.some(match[2]), undefined, s);
}

function ld_sp_nn(s) {
  var cpu = s[/* cpu */0];
  var match = Mmu$GameboyEmulator.read16(cpu[/* registers */2][/* pc */9], /* record */[
        /* gpu */s[/* gpu */2],
        /* mmu */s[/* mmu */1]
      ]);
  return newState(incrementPc(2, machineCycles(3, setSp(match[0], cpu))), Caml_option.some(match[1]), undefined, s);
}

function ld_sp_hl(s) {
  var cpu = s[/* cpu */0];
  var hl = rHl(cpu);
  return newState(machineCycles(2, setSp(hl, cpu)), undefined, undefined, s);
}

function ld_hl_sp_n(s) {
  var cpu = s[/* cpu */0];
  var match = Mmu$GameboyEmulator.read8(cpu[/* registers */2][/* pc */9], /* record */[
        /* gpu */s[/* gpu */2],
        /* mmu */s[/* mmu */1]
      ]);
  var n = signed(match[0]) + cpu[/* registers */2][/* sp */8] | 0;
  return newState(incrementPc(1, machineCycles(3, (function (eta) {
                          var param = undefined;
                          var param$1 = eta;
                          return setFlag$1(/* N */1, 0, param, param$1);
                        })((function (eta) {
                              var param = undefined;
                              var param$1 = eta;
                              return setFlag$1(/* Z */0, 0, param, param$1);
                            })(wHl(n, cpu))))), Caml_option.some(match[1]), undefined, s);
}

function ld_m_nn_sp(s) {
  var gpu = s[/* gpu */2];
  var cpu = s[/* cpu */0];
  var pc = cpu[/* registers */2][/* pc */9];
  var match = Mmu$GameboyEmulator.read16(pc, /* record */[
        /* gpu */gpu,
        /* mmu */s[/* mmu */1]
      ]);
  var match$1 = Mmu$GameboyEmulator.write16(match[0], cpu[/* registers */2][/* sp */8], /* record */[
        /* gpu */gpu,
        /* mmu */match[1]
      ]);
  return newState(incrementPc(2, cycles(20, cpu)), Caml_option.some(match$1[0]), match$1[1], s);
}

var Load_nn_16 = /* module */[
  /* ld_n_nn */ld_n_nn,
  /* ld_bc_nn */ld_bc_nn,
  /* ld_de_nn */ld_de_nn,
  /* ld_hl_nn */ld_hl_nn,
  /* ld_sp_nn */ld_sp_nn,
  /* ld_sp_hl */ld_sp_hl,
  /* ld_hl_sp_n */ld_hl_sp_n,
  /* ld_m_nn_sp */ld_m_nn_sp
];

function ld_m_bc_a(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var a = match[/* a */0];
  var match$1 = Mmu$GameboyEmulator.write8(rBc(cpu), a, /* record */[
        /* gpu */s[/* gpu */2],
        /* mmu */s[/* mmu */1]
      ]);
  return newState(machineCycles(2, cpu), Caml_option.some(match$1[0]), match$1[1], s);
}

function ld_m_de_a(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var a = match[/* a */0];
  var match$1 = Mmu$GameboyEmulator.write8(rDe(cpu), a, /* record */[
        /* gpu */s[/* gpu */2],
        /* mmu */s[/* mmu */1]
      ]);
  return newState(machineCycles(2, cpu), Caml_option.some(match$1[0]), match$1[1], s);
}

function ld_m_hl_a(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var a = match[/* a */0];
  var match$1 = Mmu$GameboyEmulator.write8(rHl(cpu), a, /* record */[
        /* gpu */s[/* gpu */2],
        /* mmu */s[/* mmu */1]
      ]);
  return newState(machineCycles(2, cpu), Caml_option.some(match$1[0]), match$1[1], s);
}

function ld_m_nn_a(s) {
  var gpu = s[/* gpu */2];
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var a = match[/* a */0];
  var match$1 = Mmu$GameboyEmulator.read16(cpu[/* registers */2][/* pc */9], /* record */[
        /* gpu */gpu,
        /* mmu */s[/* mmu */1]
      ]);
  var match$2 = Mmu$GameboyEmulator.write8(match$1[0], a, /* record */[
        /* gpu */gpu,
        /* mmu */match$1[1]
      ]);
  return newState(incrementPc(2, machineCycles(4, cpu)), Caml_option.some(match$2[0]), match$2[1], s);
}

function ld_a_a(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var a = match[/* a */0];
  var partial_arg = a;
  return newState((function (eta) {
                  var param = undefined;
                  var param$1 = undefined;
                  var param$2 = undefined;
                  var param$3 = undefined;
                  var param$4 = undefined;
                  var param$5 = undefined;
                  var param$6 = undefined;
                  var param$7 = eta;
                  return setRegisters(partial_arg, param, param$1, param$2, param$3, param$4, param$5, param$6, param$7);
                })(machineCycles(1, cpu)), undefined, undefined, s);
}

function ld_b_a(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var a = match[/* a */0];
  var eta = machineCycles(1, cpu);
  var arg = a;
  return newState((function (param) {
                    return (function (param$1, param$2, param$3, param$4, param$5, param$6, param$7) {
                        return setRegisters(param, arg, param$1, param$2, param$3, param$4, param$5, param$6, param$7);
                      });
                  })(undefined)(undefined, undefined, undefined, undefined, undefined, undefined, eta), undefined, undefined, s);
}

function ld_c_a(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var a = match[/* a */0];
  var eta = machineCycles(1, cpu);
  var arg = a;
  return newState((function (param, param$1) {
                    return (function (param$2, param$3, param$4, param$5, param$6, param$7) {
                        return setRegisters(param, param$1, arg, param$2, param$3, param$4, param$5, param$6, param$7);
                      });
                  })(undefined, undefined)(undefined, undefined, undefined, undefined, undefined, eta), undefined, undefined, s);
}

function ld_d_a(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var a = match[/* a */0];
  var eta = machineCycles(1, cpu);
  var arg = a;
  return newState((function (param, param$1, param$2) {
                    return (function (param$3, param$4, param$5, param$6, param$7) {
                        return setRegisters(param, param$1, param$2, arg, param$3, param$4, param$5, param$6, param$7);
                      });
                  })(undefined, undefined, undefined)(undefined, undefined, undefined, undefined, eta), undefined, undefined, s);
}

function ld_e_a(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var a = match[/* a */0];
  var eta = machineCycles(1, cpu);
  var arg = a;
  return newState((function (param, param$1, param$2, param$3) {
                    return (function (param$4, param$5, param$6, param$7) {
                        return setRegisters(param, param$1, param$2, param$3, arg, param$4, param$5, param$6, param$7);
                      });
                  })(undefined, undefined, undefined, undefined)(undefined, undefined, undefined, eta), undefined, undefined, s);
}

function ld_h_a(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var a = match[/* a */0];
  var eta = machineCycles(1, cpu);
  var arg = a;
  return newState((function (param, param$1, param$2, param$3, param$4) {
                    return (function (param$5, param$6, param$7) {
                        return setRegisters(param, param$1, param$2, param$3, param$4, arg, param$5, param$6, param$7);
                      });
                  })(undefined, undefined, undefined, undefined, undefined)(undefined, undefined, eta), undefined, undefined, s);
}

function ld_l_a(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var a = match[/* a */0];
  var eta = machineCycles(1, cpu);
  var arg = a;
  return newState((function (param, param$1, param$2, param$3, param$4, param$5) {
                    return (function (param$6, param$7) {
                        return setRegisters(param, param$1, param$2, param$3, param$4, param$5, arg, param$6, param$7);
                      });
                  })(undefined, undefined, undefined, undefined, undefined, undefined)(undefined, eta), undefined, undefined, s);
}

function ld_m_c_a(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var a = match[/* a */0];
  var c = match[/* c */2];
  var addr = 65280 + c | 0;
  var match$1 = Mmu$GameboyEmulator.write8(addr, a, /* record */[
        /* gpu */s[/* gpu */2],
        /* mmu */s[/* mmu */1]
      ]);
  return newState(machineCycles(2, cpu), Caml_option.some(match$1[0]), match$1[1], s);
}

function ld_hld_a(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var a = match[/* a */0];
  var match$1 = Mmu$GameboyEmulator.write8(rHl(cpu), a, /* record */[
        /* gpu */s[/* gpu */2],
        /* mmu */s[/* mmu */1]
      ]);
  return newState(decrementHl(machineCycles(2, cpu)), Caml_option.some(match$1[0]), match$1[1], s);
}

function ld_hli_a(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var a = match[/* a */0];
  var match$1 = Mmu$GameboyEmulator.write8(rHl(cpu), a, /* record */[
        /* gpu */s[/* gpu */2],
        /* mmu */s[/* mmu */1]
      ]);
  return newState(incrementHl(machineCycles(2, cpu)), Caml_option.some(match$1[0]), match$1[1], s);
}

function ldh_n_a(s) {
  var gpu = s[/* gpu */2];
  var cpu = s[/* cpu */0];
  var match = Mmu$GameboyEmulator.read8(cpu[/* registers */2][/* pc */9], /* record */[
        /* gpu */gpu,
        /* mmu */s[/* mmu */1]
      ]);
  var addr = 65280 + match[0] | 0;
  var match$1 = Mmu$GameboyEmulator.write8(addr, cpu[/* registers */2][/* a */0], /* record */[
        /* gpu */gpu,
        /* mmu */match[1]
      ]);
  return newState(machineCycles(3, incrementPc(1, cpu)), Caml_option.some(match$1[0]), match$1[1], s);
}

var Load_8_A = /* module */[
  /* ld_m_bc_a */ld_m_bc_a,
  /* ld_m_de_a */ld_m_de_a,
  /* ld_m_hl_a */ld_m_hl_a,
  /* ld_m_nn_a */ld_m_nn_a,
  /* ld_a_a */ld_a_a,
  /* ld_b_a */ld_b_a,
  /* ld_c_a */ld_c_a,
  /* ld_d_a */ld_d_a,
  /* ld_e_a */ld_e_a,
  /* ld_h_a */ld_h_a,
  /* ld_l_a */ld_l_a,
  /* ld_m_c_a */ld_m_c_a,
  /* ld_hld_a */ld_hld_a,
  /* ld_hli_a */ld_hli_a,
  /* ldh_n_a */ldh_n_a
];

function ld_a_b(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var b = match[/* b */1];
  var partial_arg = b;
  return newState((function (eta) {
                  var param = undefined;
                  var param$1 = undefined;
                  var param$2 = undefined;
                  var param$3 = undefined;
                  var param$4 = undefined;
                  var param$5 = undefined;
                  var param$6 = undefined;
                  var param$7 = eta;
                  return setRegisters(partial_arg, param, param$1, param$2, param$3, param$4, param$5, param$6, param$7);
                })(machineCycles(1, cpu)), undefined, undefined, s);
}

function ld_a_c(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var c = match[/* c */2];
  var partial_arg = c;
  return newState((function (eta) {
                  var param = undefined;
                  var param$1 = undefined;
                  var param$2 = undefined;
                  var param$3 = undefined;
                  var param$4 = undefined;
                  var param$5 = undefined;
                  var param$6 = undefined;
                  var param$7 = eta;
                  return setRegisters(partial_arg, param, param$1, param$2, param$3, param$4, param$5, param$6, param$7);
                })(machineCycles(1, cpu)), undefined, undefined, s);
}

function ld_a_d(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var d = match[/* d */3];
  var partial_arg = d;
  return newState((function (eta) {
                  var param = undefined;
                  var param$1 = undefined;
                  var param$2 = undefined;
                  var param$3 = undefined;
                  var param$4 = undefined;
                  var param$5 = undefined;
                  var param$6 = undefined;
                  var param$7 = eta;
                  return setRegisters(partial_arg, param, param$1, param$2, param$3, param$4, param$5, param$6, param$7);
                })(machineCycles(1, cpu)), undefined, undefined, s);
}

function ld_a_e(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var e = match[/* e */4];
  var partial_arg = e;
  return newState((function (eta) {
                  var param = undefined;
                  var param$1 = undefined;
                  var param$2 = undefined;
                  var param$3 = undefined;
                  var param$4 = undefined;
                  var param$5 = undefined;
                  var param$6 = undefined;
                  var param$7 = eta;
                  return setRegisters(partial_arg, param, param$1, param$2, param$3, param$4, param$5, param$6, param$7);
                })(machineCycles(1, cpu)), undefined, undefined, s);
}

function ld_a_h(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var h = match[/* h */5];
  var partial_arg = h;
  return newState((function (eta) {
                  var param = undefined;
                  var param$1 = undefined;
                  var param$2 = undefined;
                  var param$3 = undefined;
                  var param$4 = undefined;
                  var param$5 = undefined;
                  var param$6 = undefined;
                  var param$7 = eta;
                  return setRegisters(partial_arg, param, param$1, param$2, param$3, param$4, param$5, param$6, param$7);
                })(machineCycles(1, cpu)), undefined, undefined, s);
}

function ld_a_l(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var l = match[/* l */6];
  var partial_arg = l;
  return newState((function (eta) {
                  var param = undefined;
                  var param$1 = undefined;
                  var param$2 = undefined;
                  var param$3 = undefined;
                  var param$4 = undefined;
                  var param$5 = undefined;
                  var param$6 = undefined;
                  var param$7 = eta;
                  return setRegisters(partial_arg, param, param$1, param$2, param$3, param$4, param$5, param$6, param$7);
                })(machineCycles(1, cpu)), undefined, undefined, s);
}

function ld_a_m_bc(s) {
  var cpu = s[/* cpu */0];
  var match = Mmu$GameboyEmulator.read8(rBc(cpu), /* record */[
        /* gpu */s[/* gpu */2],
        /* mmu */s[/* mmu */1]
      ]);
  var partial_arg = match[0];
  return newState((function (eta) {
                  var param = undefined;
                  var param$1 = undefined;
                  var param$2 = undefined;
                  var param$3 = undefined;
                  var param$4 = undefined;
                  var param$5 = undefined;
                  var param$6 = undefined;
                  var param$7 = eta;
                  return setRegisters(partial_arg, param, param$1, param$2, param$3, param$4, param$5, param$6, param$7);
                })(machineCycles(2, cpu)), Caml_option.some(match[1]), undefined, s);
}

function ld_a_m_de(s) {
  var cpu = s[/* cpu */0];
  var match = Mmu$GameboyEmulator.read8(rDe(cpu), /* record */[
        /* gpu */s[/* gpu */2],
        /* mmu */s[/* mmu */1]
      ]);
  var partial_arg = match[0];
  return newState((function (eta) {
                  var param = undefined;
                  var param$1 = undefined;
                  var param$2 = undefined;
                  var param$3 = undefined;
                  var param$4 = undefined;
                  var param$5 = undefined;
                  var param$6 = undefined;
                  var param$7 = eta;
                  return setRegisters(partial_arg, param, param$1, param$2, param$3, param$4, param$5, param$6, param$7);
                })(machineCycles(2, cpu)), Caml_option.some(match[1]), undefined, s);
}

function ld_a_m_hl(s) {
  var cpu = s[/* cpu */0];
  var match = Mmu$GameboyEmulator.read8(rHl(cpu), /* record */[
        /* gpu */s[/* gpu */2],
        /* mmu */s[/* mmu */1]
      ]);
  var partial_arg = match[0];
  return newState((function (eta) {
                  var param = undefined;
                  var param$1 = undefined;
                  var param$2 = undefined;
                  var param$3 = undefined;
                  var param$4 = undefined;
                  var param$5 = undefined;
                  var param$6 = undefined;
                  var param$7 = eta;
                  return setRegisters(partial_arg, param, param$1, param$2, param$3, param$4, param$5, param$6, param$7);
                })(machineCycles(2, cpu)), Caml_option.some(match[1]), undefined, s);
}

function ld_a_m_nn(s) {
  var gpu = s[/* gpu */2];
  var cpu = s[/* cpu */0];
  var match = Mmu$GameboyEmulator.read16(cpu[/* registers */2][/* pc */9], /* record */[
        /* gpu */gpu,
        /* mmu */s[/* mmu */1]
      ]);
  var match$1 = Mmu$GameboyEmulator.read8(match[0], /* record */[
        /* gpu */gpu,
        /* mmu */match[1]
      ]);
  var partial_arg = match$1[0];
  return newState((function (eta) {
                  var param = undefined;
                  var param$1 = undefined;
                  var param$2 = undefined;
                  var param$3 = undefined;
                  var param$4 = undefined;
                  var param$5 = undefined;
                  var param$6 = undefined;
                  var param$7 = eta;
                  return setRegisters(partial_arg, param, param$1, param$2, param$3, param$4, param$5, param$6, param$7);
                })(incrementPc(2, machineCycles(4, cpu))), Caml_option.some(match$1[1]), undefined, s);
}

function ld_a_m_n(s) {
  var cpu = s[/* cpu */0];
  var addr = cpu[/* registers */2][/* pc */9];
  var match = Mmu$GameboyEmulator.read8(addr, /* record */[
        /* gpu */s[/* gpu */2],
        /* mmu */s[/* mmu */1]
      ]);
  var partial_arg = match[0];
  return newState((function (eta) {
                  var param = undefined;
                  var param$1 = undefined;
                  var param$2 = undefined;
                  var param$3 = undefined;
                  var param$4 = undefined;
                  var param$5 = undefined;
                  var param$6 = undefined;
                  var param$7 = eta;
                  return setRegisters(partial_arg, param, param$1, param$2, param$3, param$4, param$5, param$6, param$7);
                })(incrementPc(1, machineCycles(2, cpu))), Caml_option.some(match[1]), undefined, s);
}

function ld_a_m_c(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var c = match[/* c */2];
  var addr = 65280 + c | 0;
  var match$1 = Mmu$GameboyEmulator.read8(addr, /* record */[
        /* gpu */s[/* gpu */2],
        /* mmu */s[/* mmu */1]
      ]);
  var partial_arg = match$1[0];
  return newState((function (eta) {
                  var param = undefined;
                  var param$1 = undefined;
                  var param$2 = undefined;
                  var param$3 = undefined;
                  var param$4 = undefined;
                  var param$5 = undefined;
                  var param$6 = undefined;
                  var param$7 = eta;
                  return setRegisters(partial_arg, param, param$1, param$2, param$3, param$4, param$5, param$6, param$7);
                })(machineCycles(2, cpu)), Caml_option.some(match$1[1]), undefined, s);
}

function ld_a_m_hld(s) {
  var cpu = s[/* cpu */0];
  var match = Mmu$GameboyEmulator.read8(rHl(cpu), /* record */[
        /* gpu */s[/* gpu */2],
        /* mmu */s[/* mmu */1]
      ]);
  var partial_arg = match[0];
  return newState((function (eta) {
                  var param = undefined;
                  var param$1 = undefined;
                  var param$2 = undefined;
                  var param$3 = undefined;
                  var param$4 = undefined;
                  var param$5 = undefined;
                  var param$6 = undefined;
                  var param$7 = eta;
                  return setRegisters(partial_arg, param, param$1, param$2, param$3, param$4, param$5, param$6, param$7);
                })(decrementHl(machineCycles(2, cpu))), Caml_option.some(match[1]), undefined, s);
}

function ld_a_m_hli(s) {
  var cpu = s[/* cpu */0];
  var match = Mmu$GameboyEmulator.read8(rHl(cpu), /* record */[
        /* gpu */s[/* gpu */2],
        /* mmu */s[/* mmu */1]
      ]);
  var partial_arg = match[0];
  return newState((function (eta) {
                  var param = undefined;
                  var param$1 = undefined;
                  var param$2 = undefined;
                  var param$3 = undefined;
                  var param$4 = undefined;
                  var param$5 = undefined;
                  var param$6 = undefined;
                  var param$7 = eta;
                  return setRegisters(partial_arg, param, param$1, param$2, param$3, param$4, param$5, param$6, param$7);
                })(incrementHl(machineCycles(2, cpu))), Caml_option.some(match[1]), undefined, s);
}

function ldh_a_n(s) {
  var gpu = s[/* gpu */2];
  var cpu = s[/* cpu */0];
  var match = Mmu$GameboyEmulator.read8(cpu[/* registers */2][/* pc */9], /* record */[
        /* gpu */gpu,
        /* mmu */s[/* mmu */1]
      ]);
  var addr = 65280 + match[0] | 0;
  var match$1 = Mmu$GameboyEmulator.read8(addr, /* record */[
        /* gpu */gpu,
        /* mmu */match[1]
      ]);
  var partial_arg = match$1[0];
  return newState(machineCycles(3, incrementPc(1, (function (eta) {
                          var param = undefined;
                          var param$1 = undefined;
                          var param$2 = undefined;
                          var param$3 = undefined;
                          var param$4 = undefined;
                          var param$5 = undefined;
                          var param$6 = undefined;
                          var param$7 = eta;
                          return setRegisters(partial_arg, param, param$1, param$2, param$3, param$4, param$5, param$6, param$7);
                        })(cpu))), Caml_option.some(match$1[1]), gpu, s);
}

var Load_A_8 = /* module */[
  /* ld_a_b */ld_a_b,
  /* ld_a_c */ld_a_c,
  /* ld_a_d */ld_a_d,
  /* ld_a_e */ld_a_e,
  /* ld_a_h */ld_a_h,
  /* ld_a_l */ld_a_l,
  /* ld_a_m_bc */ld_a_m_bc,
  /* ld_a_m_de */ld_a_m_de,
  /* ld_a_m_hl */ld_a_m_hl,
  /* ld_a_m_nn */ld_a_m_nn,
  /* ld_a_m_n */ld_a_m_n,
  /* ld_a_m_c */ld_a_m_c,
  /* ld_a_m_hld */ld_a_m_hld,
  /* ld_a_m_hli */ld_a_m_hli,
  /* ldh_a_n */ldh_a_n
];

function inc_bc(s) {
  var cpu = s[/* cpu */0];
  var c = cpu[/* registers */2][/* c */2] + 1 & 255;
  var b = c === 0 ? cpu[/* registers */2][/* b */1] + 1 & 255 : cpu[/* registers */2][/* b */1];
  var arg = b;
  var arg$1 = c;
  return newState(machineCycles(2, (function (param) {
                        return (function (param$1, param$2, param$3, param$4, param$5, param$6) {
                            return setRegisters(param, arg, arg$1, param$1, param$2, param$3, param$4, param$5, param$6);
                          });
                      })(undefined)(undefined, undefined, undefined, undefined, undefined, cpu)), undefined, undefined, s);
}

function inc_de(s) {
  var cpu = s[/* cpu */0];
  var e = cpu[/* registers */2][/* e */4] + 1 & 255;
  var d = e === 0 ? cpu[/* registers */2][/* d */3] + 1 & 255 : cpu[/* registers */2][/* d */3];
  var arg = d;
  var arg$1 = e;
  return newState(machineCycles(2, (function (param, param$1, param$2) {
                        return (function (param$3, param$4, param$5, param$6) {
                            return setRegisters(param, param$1, param$2, arg, arg$1, param$3, param$4, param$5, param$6);
                          });
                      })(undefined, undefined, undefined)(undefined, undefined, undefined, cpu)), undefined, undefined, s);
}

function inc_hl(s) {
  return newState(machineCycles(2, incrementHl(s[/* cpu */0])), undefined, undefined, s);
}

function inc_sp(s) {
  return newState(machineCycles(2, incrementSp(undefined, s[/* cpu */0])), undefined, undefined, s);
}

var Increment16 = /* module */[
  /* inc_bc */inc_bc,
  /* inc_de */inc_de,
  /* inc_hl */inc_hl,
  /* inc_sp */inc_sp
];

function inc(register, cpu) {
  var r = register + 1 & 255;
  var f = cpu[/* registers */2][/* f */7] & 16;
  return /* tuple */[
          r,
          machineCycles(1, (function (eta) {
                    var param = undefined;
                    var param$1 = eta;
                    return setFlag$1(/* N */1, 0, param, param$1);
                  })(setFlag$1(/* Z */0, r === 0 ? 1 : 0, f, cpu)))
        ];
}

function inc_a(s) {
  var cpu = s[/* cpu */0];
  var match = inc(cpu[/* registers */2][/* a */0], cpu);
  var partial_arg = match[0];
  return newState((function (eta) {
                  var param = undefined;
                  var param$1 = undefined;
                  var param$2 = undefined;
                  var param$3 = undefined;
                  var param$4 = undefined;
                  var param$5 = undefined;
                  var param$6 = undefined;
                  var param$7 = eta;
                  return setRegisters(partial_arg, param, param$1, param$2, param$3, param$4, param$5, param$6, param$7);
                })(match[1]), undefined, undefined, s);
}

function inc_b(s) {
  var cpu = s[/* cpu */0];
  var match = inc(cpu[/* registers */2][/* b */1], cpu);
  var arg = match[0];
  return newState((function (param) {
                    return (function (param$1, param$2, param$3, param$4, param$5, param$6, param$7) {
                        return setRegisters(param, arg, param$1, param$2, param$3, param$4, param$5, param$6, param$7);
                      });
                  })(undefined)(undefined, undefined, undefined, undefined, undefined, undefined, match[1]), undefined, undefined, s);
}

function inc_c(s) {
  var cpu = s[/* cpu */0];
  var match = inc(cpu[/* registers */2][/* c */2], cpu);
  var arg = match[0];
  return newState((function (param, param$1) {
                    return (function (param$2, param$3, param$4, param$5, param$6, param$7) {
                        return setRegisters(param, param$1, arg, param$2, param$3, param$4, param$5, param$6, param$7);
                      });
                  })(undefined, undefined)(undefined, undefined, undefined, undefined, undefined, match[1]), undefined, undefined, s);
}

function inc_d(s) {
  var cpu = s[/* cpu */0];
  var match = inc(cpu[/* registers */2][/* d */3], cpu);
  var arg = match[0];
  return newState((function (param, param$1, param$2) {
                    return (function (param$3, param$4, param$5, param$6, param$7) {
                        return setRegisters(param, param$1, param$2, arg, param$3, param$4, param$5, param$6, param$7);
                      });
                  })(undefined, undefined, undefined)(undefined, undefined, undefined, undefined, match[1]), undefined, undefined, s);
}

function inc_e(s) {
  var cpu = s[/* cpu */0];
  var match = inc(cpu[/* registers */2][/* e */4], cpu);
  var arg = match[0];
  return newState((function (param, param$1, param$2, param$3) {
                    return (function (param$4, param$5, param$6, param$7) {
                        return setRegisters(param, param$1, param$2, param$3, arg, param$4, param$5, param$6, param$7);
                      });
                  })(undefined, undefined, undefined, undefined)(undefined, undefined, undefined, match[1]), undefined, undefined, s);
}

function inc_h(s) {
  var cpu = s[/* cpu */0];
  var match = inc(cpu[/* registers */2][/* h */5], cpu);
  var arg = match[0];
  return newState((function (param, param$1, param$2, param$3, param$4) {
                    return (function (param$5, param$6, param$7) {
                        return setRegisters(param, param$1, param$2, param$3, param$4, arg, param$5, param$6, param$7);
                      });
                  })(undefined, undefined, undefined, undefined, undefined)(undefined, undefined, match[1]), undefined, undefined, s);
}

function inc_l(s) {
  var cpu = s[/* cpu */0];
  var match = inc(cpu[/* registers */2][/* l */6], cpu);
  var arg = match[0];
  return newState((function (param, param$1, param$2, param$3, param$4, param$5) {
                    return (function (param$6, param$7) {
                        return setRegisters(param, param$1, param$2, param$3, param$4, param$5, arg, param$6, param$7);
                      });
                  })(undefined, undefined, undefined, undefined, undefined, undefined)(undefined, match[1]), undefined, undefined, s);
}

var Increment8 = /* module */[
  /* inc */inc,
  /* inc_a */inc_a,
  /* inc_b */inc_b,
  /* inc_c */inc_c,
  /* inc_d */inc_d,
  /* inc_e */inc_e,
  /* inc_h */inc_h,
  /* inc_l */inc_l
];

function dec(register, $staropt$star, cpu) {
  var cycles = $staropt$star !== undefined ? $staropt$star : 1;
  var r = register - 1 & 255;
  var f = cpu[/* registers */2][/* f */7] & 16;
  return /* tuple */[
          r,
          machineCycles(cycles, (function (eta) {
                    var param = undefined;
                    var param$1 = eta;
                    return setFlag$1(/* N */1, 1, param, param$1);
                  })(setFlag$1(/* Z */0, r === 0 ? 1 : 0, f, cpu)))
        ];
}

function dec_a(s) {
  var cpu = s[/* cpu */0];
  var match = dec(cpu[/* registers */2][/* a */0], undefined, cpu);
  var partial_arg = match[0];
  return newState((function (eta) {
                  var param = undefined;
                  var param$1 = undefined;
                  var param$2 = undefined;
                  var param$3 = undefined;
                  var param$4 = undefined;
                  var param$5 = undefined;
                  var param$6 = undefined;
                  var param$7 = eta;
                  return setRegisters(partial_arg, param, param$1, param$2, param$3, param$4, param$5, param$6, param$7);
                })(match[1]), undefined, undefined, s);
}

function dec_b(s) {
  var cpu = s[/* cpu */0];
  var match = dec(cpu[/* registers */2][/* b */1], undefined, cpu);
  var arg = match[0];
  return newState((function (param) {
                    return (function (param$1, param$2, param$3, param$4, param$5, param$6, param$7) {
                        return setRegisters(param, arg, param$1, param$2, param$3, param$4, param$5, param$6, param$7);
                      });
                  })(undefined)(undefined, undefined, undefined, undefined, undefined, undefined, match[1]), undefined, undefined, s);
}

function dec_c(s) {
  var cpu = s[/* cpu */0];
  var match = dec(cpu[/* registers */2][/* c */2], undefined, cpu);
  var arg = match[0];
  return newState((function (param, param$1) {
                    return (function (param$2, param$3, param$4, param$5, param$6, param$7) {
                        return setRegisters(param, param$1, arg, param$2, param$3, param$4, param$5, param$6, param$7);
                      });
                  })(undefined, undefined)(undefined, undefined, undefined, undefined, undefined, match[1]), undefined, undefined, s);
}

function dec_d(s) {
  var cpu = s[/* cpu */0];
  var match = dec(cpu[/* registers */2][/* d */3], undefined, cpu);
  var arg = match[0];
  return newState((function (param, param$1, param$2) {
                    return (function (param$3, param$4, param$5, param$6, param$7) {
                        return setRegisters(param, param$1, param$2, arg, param$3, param$4, param$5, param$6, param$7);
                      });
                  })(undefined, undefined, undefined)(undefined, undefined, undefined, undefined, match[1]), undefined, undefined, s);
}

function dec_e(s) {
  var cpu = s[/* cpu */0];
  var match = dec(cpu[/* registers */2][/* e */4], undefined, cpu);
  var arg = match[0];
  return newState((function (param, param$1, param$2, param$3) {
                    return (function (param$4, param$5, param$6, param$7) {
                        return setRegisters(param, param$1, param$2, param$3, arg, param$4, param$5, param$6, param$7);
                      });
                  })(undefined, undefined, undefined, undefined)(undefined, undefined, undefined, match[1]), undefined, undefined, s);
}

function dec_h(s) {
  var cpu = s[/* cpu */0];
  var match = dec(cpu[/* registers */2][/* h */5], undefined, cpu);
  var arg = match[0];
  return newState((function (param, param$1, param$2, param$3, param$4) {
                    return (function (param$5, param$6, param$7) {
                        return setRegisters(param, param$1, param$2, param$3, param$4, arg, param$5, param$6, param$7);
                      });
                  })(undefined, undefined, undefined, undefined, undefined)(undefined, undefined, match[1]), undefined, undefined, s);
}

function dec_l(s) {
  var cpu = s[/* cpu */0];
  var match = dec(cpu[/* registers */2][/* l */6], undefined, cpu);
  var arg = match[0];
  return newState((function (param, param$1, param$2, param$3, param$4, param$5) {
                    return (function (param$6, param$7) {
                        return setRegisters(param, param$1, param$2, param$3, param$4, param$5, arg, param$6, param$7);
                      });
                  })(undefined, undefined, undefined, undefined, undefined, undefined)(undefined, match[1]), undefined, undefined, s);
}

function dec_m_hl(s) {
  var gpu = s[/* gpu */2];
  var mmu = s[/* mmu */1];
  var cpu = s[/* cpu */0];
  var addr = rHl(cpu);
  var match = Mmu$GameboyEmulator.read8(addr, /* record */[
        /* gpu */gpu,
        /* mmu */mmu
      ]);
  var match$1 = dec(match[0], 3, cpu);
  var match$2 = Mmu$GameboyEmulator.write8(addr, match$1[0], /* record */[
        /* gpu */gpu,
        /* mmu */mmu
      ]);
  return newState(match$1[1], Caml_option.some(match$2[0]), match$2[1], s);
}

var Decrement8 = /* module */[
  /* dec */dec,
  /* dec_a */dec_a,
  /* dec_b */dec_b,
  /* dec_c */dec_c,
  /* dec_d */dec_d,
  /* dec_e */dec_e,
  /* dec_h */dec_h,
  /* dec_l */dec_l,
  /* dec_m_hl */dec_m_hl
];

function dec_bc(s) {
  var cpu = s[/* cpu */0];
  var c = cpu[/* registers */2][/* c */2] - 1 & 255;
  var b = c === 255 ? cpu[/* registers */2][/* b */1] - 1 & 255 : cpu[/* registers */2][/* b */1];
  var arg = b;
  var arg$1 = c;
  return newState(machineCycles(2, (function (param) {
                        return (function (param$1, param$2, param$3, param$4, param$5, param$6) {
                            return setRegisters(param, arg, arg$1, param$1, param$2, param$3, param$4, param$5, param$6);
                          });
                      })(undefined)(undefined, undefined, undefined, undefined, undefined, cpu)), undefined, undefined, s);
}

function dec_de(s) {
  var cpu = s[/* cpu */0];
  var e = cpu[/* registers */2][/* e */4] - 1 & 255;
  var d = e === 255 ? cpu[/* registers */2][/* d */3] - 1 & 255 : cpu[/* registers */2][/* d */3];
  var arg = d;
  var arg$1 = e;
  return newState(machineCycles(2, (function (param, param$1, param$2) {
                        return (function (param$3, param$4, param$5, param$6) {
                            return setRegisters(param, param$1, param$2, arg, arg$1, param$3, param$4, param$5, param$6);
                          });
                      })(undefined, undefined, undefined)(undefined, undefined, undefined, cpu)), undefined, undefined, s);
}

function dec_hl(s) {
  var cpu = decrementHl(s[/* cpu */0]);
  return newState(machineCycles(2, cpu), undefined, undefined, s);
}

function dec_sp(s) {
  return newState(machineCycles(2, decrementSp(undefined, s[/* cpu */0])), undefined, undefined, s);
}

var Decrement16 = /* module */[
  /* dec_bc */dec_bc,
  /* dec_de */dec_de,
  /* dec_hl */dec_hl,
  /* dec_sp */dec_sp
];

function rlc(cpu, $staropt$star, register) {
  var mCycles = $staropt$star !== undefined ? $staropt$star : 1;
  var match = (register & 128) > 0;
  var highBit = match ? 1 : 0;
  var r = (register << 1) + highBit & 255;
  return /* tuple */[
          r,
          (function (eta) {
                var param = undefined;
                var param$1 = eta;
                return setFlag$1(/* C */3, highBit, param, param$1);
              })(machineCycles(mCycles, cpu))
        ];
}

function rlca(s) {
  var cpu = s[/* cpu */0];
  var match = rlc(cpu, undefined, cpu[/* registers */2][/* a */0]);
  var partial_arg = match[0];
  return newState((function (eta) {
                  var param = undefined;
                  var param$1 = undefined;
                  var param$2 = undefined;
                  var param$3 = undefined;
                  var param$4 = undefined;
                  var param$5 = undefined;
                  var param$6 = undefined;
                  var param$7 = eta;
                  return setRegisters(partial_arg, param, param$1, param$2, param$3, param$4, param$5, param$6, param$7);
                })(match[1]), undefined, undefined, s);
}

function rlcb(s) {
  var cpu = s[/* cpu */0];
  var match = rlc(cpu, 2, cpu[/* registers */2][/* b */1]);
  var arg = match[0];
  return newState((function (param) {
                    return (function (param$1, param$2, param$3, param$4, param$5, param$6, param$7) {
                        return setRegisters(param, arg, param$1, param$2, param$3, param$4, param$5, param$6, param$7);
                      });
                  })(undefined)(undefined, undefined, undefined, undefined, undefined, undefined, match[1]), undefined, undefined, s);
}

function rlcc(s) {
  var cpu = s[/* cpu */0];
  var match = rlc(cpu, 2, cpu[/* registers */2][/* c */2]);
  var arg = match[0];
  return newState((function (param, param$1) {
                    return (function (param$2, param$3, param$4, param$5, param$6, param$7) {
                        return setRegisters(param, param$1, arg, param$2, param$3, param$4, param$5, param$6, param$7);
                      });
                  })(undefined, undefined)(undefined, undefined, undefined, undefined, undefined, match[1]), undefined, undefined, s);
}

function rlcd(s) {
  var cpu = s[/* cpu */0];
  var match = rlc(cpu, 2, cpu[/* registers */2][/* d */3]);
  var arg = match[0];
  return newState((function (param, param$1, param$2) {
                    return (function (param$3, param$4, param$5, param$6, param$7) {
                        return setRegisters(param, param$1, param$2, arg, param$3, param$4, param$5, param$6, param$7);
                      });
                  })(undefined, undefined, undefined)(undefined, undefined, undefined, undefined, match[1]), undefined, undefined, s);
}

function rlce(s) {
  var cpu = s[/* cpu */0];
  var match = rlc(cpu, 2, cpu[/* registers */2][/* e */4]);
  var arg = match[0];
  return newState((function (param, param$1, param$2, param$3) {
                    return (function (param$4, param$5, param$6, param$7) {
                        return setRegisters(param, param$1, param$2, param$3, arg, param$4, param$5, param$6, param$7);
                      });
                  })(undefined, undefined, undefined, undefined)(undefined, undefined, undefined, match[1]), undefined, undefined, s);
}

function rlch(s) {
  var cpu = s[/* cpu */0];
  var match = rlc(cpu, 2, cpu[/* registers */2][/* h */5]);
  var arg = match[0];
  return newState((function (param, param$1, param$2, param$3, param$4) {
                    return (function (param$5, param$6, param$7) {
                        return setRegisters(param, param$1, param$2, param$3, param$4, arg, param$5, param$6, param$7);
                      });
                  })(undefined, undefined, undefined, undefined, undefined)(undefined, undefined, match[1]), undefined, undefined, s);
}

function rlcl(s) {
  var cpu = s[/* cpu */0];
  var match = rlc(cpu, 2, cpu[/* registers */2][/* l */6]);
  var arg = match[0];
  return newState((function (param, param$1, param$2, param$3, param$4, param$5) {
                    return (function (param$6, param$7) {
                        return setRegisters(param, param$1, param$2, param$3, param$4, param$5, arg, param$6, param$7);
                      });
                  })(undefined, undefined, undefined, undefined, undefined, undefined)(undefined, match[1]), undefined, undefined, s);
}

function rrca(s) {
  return newState(machineCycles(1, s[/* cpu */0]), undefined, undefined, s);
}

function rla(s) {
  return newState(machineCycles(1, s[/* cpu */0]), undefined, undefined, s);
}

function rra(s) {
  return newState(machineCycles(1, s[/* cpu */0]), undefined, undefined, s);
}

var Rotation = /* module */[
  /* rlc */rlc,
  /* rlca */rlca,
  /* rlcb */rlcb,
  /* rlcc */rlcc,
  /* rlcd */rlcd,
  /* rlce */rlce,
  /* rlch */rlch,
  /* rlcl */rlcl,
  /* rrca */rrca,
  /* rla */rla,
  /* rra */rra
];

function or_(register, $staropt$star, cpu) {
  var cycles = $staropt$star !== undefined ? $staropt$star : 1;
  var r = (cpu[/* registers */2][/* a */0] | register) & 255;
  return /* tuple */[
          r,
          machineCycles(cycles, setFlag$1(/* Z */0, r === 0 ? 1 : 0, 0, cpu))
        ];
}

function or_a(s) {
  var cpu = s[/* cpu */0];
  var match = or_(cpu[/* registers */2][/* a */0], undefined, cpu);
  var partial_arg = match[0];
  return newState((function (eta) {
                  var param = undefined;
                  var param$1 = undefined;
                  var param$2 = undefined;
                  var param$3 = undefined;
                  var param$4 = undefined;
                  var param$5 = undefined;
                  var param$6 = undefined;
                  var param$7 = eta;
                  return setRegisters(partial_arg, param, param$1, param$2, param$3, param$4, param$5, param$6, param$7);
                })(match[1]), undefined, undefined, s);
}

function or_b(s) {
  var cpu = s[/* cpu */0];
  var match = or_(cpu[/* registers */2][/* b */1], undefined, cpu);
  var arg = match[0];
  return newState((function (param) {
                    return (function (param$1, param$2, param$3, param$4, param$5, param$6, param$7) {
                        return setRegisters(param, arg, param$1, param$2, param$3, param$4, param$5, param$6, param$7);
                      });
                  })(undefined)(undefined, undefined, undefined, undefined, undefined, undefined, match[1]), undefined, undefined, s);
}

function or_c(s) {
  var cpu = s[/* cpu */0];
  var match = or_(cpu[/* registers */2][/* c */2], undefined, cpu);
  var arg = match[0];
  return newState((function (param, param$1) {
                    return (function (param$2, param$3, param$4, param$5, param$6, param$7) {
                        return setRegisters(param, param$1, arg, param$2, param$3, param$4, param$5, param$6, param$7);
                      });
                  })(undefined, undefined)(undefined, undefined, undefined, undefined, undefined, match[1]), undefined, undefined, s);
}

function or_d(s) {
  var cpu = s[/* cpu */0];
  var match = or_(cpu[/* registers */2][/* d */3], undefined, cpu);
  var arg = match[0];
  return newState((function (param, param$1, param$2) {
                    return (function (param$3, param$4, param$5, param$6, param$7) {
                        return setRegisters(param, param$1, param$2, arg, param$3, param$4, param$5, param$6, param$7);
                      });
                  })(undefined, undefined, undefined)(undefined, undefined, undefined, undefined, match[1]), undefined, undefined, s);
}

function or_e(s) {
  var cpu = s[/* cpu */0];
  var match = or_(cpu[/* registers */2][/* e */4], undefined, cpu);
  var arg = match[0];
  return newState((function (param, param$1, param$2, param$3) {
                    return (function (param$4, param$5, param$6, param$7) {
                        return setRegisters(param, param$1, param$2, param$3, arg, param$4, param$5, param$6, param$7);
                      });
                  })(undefined, undefined, undefined, undefined)(undefined, undefined, undefined, match[1]), undefined, undefined, s);
}

function or_h(s) {
  var cpu = s[/* cpu */0];
  var match = or_(cpu[/* registers */2][/* h */5], undefined, cpu);
  var arg = match[0];
  return newState((function (param, param$1, param$2, param$3, param$4) {
                    return (function (param$5, param$6, param$7) {
                        return setRegisters(param, param$1, param$2, param$3, param$4, arg, param$5, param$6, param$7);
                      });
                  })(undefined, undefined, undefined, undefined, undefined)(undefined, undefined, match[1]), undefined, undefined, s);
}

function or_l(s) {
  var cpu = s[/* cpu */0];
  var match = or_(cpu[/* registers */2][/* l */6], undefined, cpu);
  var arg = match[0];
  return newState((function (param, param$1, param$2, param$3, param$4, param$5) {
                    return (function (param$6, param$7) {
                        return setRegisters(param, param$1, param$2, param$3, param$4, param$5, arg, param$6, param$7);
                      });
                  })(undefined, undefined, undefined, undefined, undefined, undefined)(undefined, match[1]), undefined, undefined, s);
}

function or_m_hl(s) {
  var cpu = s[/* cpu */0];
  var match = Mmu$GameboyEmulator.read8(rHl(cpu), /* record */[
        /* gpu */s[/* gpu */2],
        /* mmu */s[/* mmu */1]
      ]);
  var match$1 = or_(match[0], 2, cpu);
  var arg = match$1[0];
  return newState((function (param, param$1, param$2, param$3, param$4, param$5) {
                    return (function (param$6, param$7) {
                        return setRegisters(param, param$1, param$2, param$3, param$4, param$5, arg, param$6, param$7);
                      });
                  })(undefined, undefined, undefined, undefined, undefined, undefined)(undefined, match$1[1]), undefined, undefined, s);
}

var Or = /* module */[
  /* or_ */or_,
  /* or_a */or_a,
  /* or_b */or_b,
  /* or_c */or_c,
  /* or_d */or_d,
  /* or_e */or_e,
  /* or_h */or_h,
  /* or_l */or_l,
  /* or_m_hl */or_m_hl
];

function push(param, register1, register2) {
  var cpu = decrementSp(undefined, param[/* cpu */0]);
  var match = Mmu$GameboyEmulator.write8(cpu[/* registers */2][/* sp */8], register1, /* record */[
        /* gpu */param[/* gpu */2],
        /* mmu */param[/* mmu */1]
      ]);
  var cpu$1 = decrementSp(undefined, cpu);
  var match$1 = Mmu$GameboyEmulator.write8(cpu$1[/* registers */2][/* sp */8], register2, /* record */[
        /* gpu */match[1],
        /* mmu */match[0]
      ]);
  return /* tuple */[
          machineCycles(4, cpu$1),
          match$1[0],
          match$1[1]
        ];
}

function push_af(s) {
  var cpu = s[/* cpu */0];
  var match = push(s, cpu[/* registers */2][/* a */0], cpu[/* registers */2][/* f */7]);
  return newState(match[0], Caml_option.some(match[1]), match[2], s);
}

function push_bc(s) {
  var cpu = s[/* cpu */0];
  var match = push(s, cpu[/* registers */2][/* b */1], cpu[/* registers */2][/* c */2]);
  return newState(match[0], Caml_option.some(match[1]), match[2], s);
}

function push_de(s) {
  var cpu = s[/* cpu */0];
  var match = push(s, cpu[/* registers */2][/* d */3], cpu[/* registers */2][/* e */4]);
  return newState(match[0], Caml_option.some(match[1]), match[2], s);
}

function push_hl(s) {
  var cpu = s[/* cpu */0];
  var match = push(s, cpu[/* registers */2][/* h */5], cpu[/* registers */2][/* l */6]);
  return newState(match[0], Caml_option.some(match[1]), match[2], s);
}

var Push = /* module */[
  /* push */push,
  /* push_af */push_af,
  /* push_bc */push_bc,
  /* push_de */push_de,
  /* push_hl */push_hl
];

function pop(param) {
  var gpu = param[/* gpu */2];
  var cpu = param[/* cpu */0];
  var match = Mmu$GameboyEmulator.read8(cpu[/* registers */2][/* sp */8], /* record */[
        /* gpu */gpu,
        /* mmu */param[/* mmu */1]
      ]);
  var cpu$1 = incrementSp(undefined, cpu);
  var match$1 = Mmu$GameboyEmulator.read8(cpu$1[/* registers */2][/* sp */8], /* record */[
        /* gpu */gpu,
        /* mmu */match[1]
      ]);
  var cpu$2 = incrementSp(undefined, cpu$1);
  return /* tuple */[
          machineCycles(3, cpu$2),
          match$1[1],
          match$1[0],
          match[0]
        ];
}

function pop_af(s) {
  var match = pop(s);
  var a = match[2];
  var arg = match[3];
  var arg$1 = function (param, param$1, param$2, param$3, param$4, param$5) {
    var partial_arg = a;
    return (function (param$6) {
        return setRegisters(partial_arg, param, param$1, param$2, param$3, param$4, param$5, arg, param$6);
      });
  };
  return newState((function (eta) {
                  return arg$1(undefined, undefined, undefined, undefined, undefined, undefined)(eta);
                })(match[0]), Caml_option.some(match[1]), undefined, s);
}

function pop_bc(s) {
  var match = pop(s);
  var arg = match[2];
  var arg$1 = match[3];
  return newState((function (param) {
                    return (function (param$1, param$2, param$3, param$4, param$5, param$6) {
                        return setRegisters(param, arg, arg$1, param$1, param$2, param$3, param$4, param$5, param$6);
                      });
                  })(undefined)(undefined, undefined, undefined, undefined, undefined, match[0]), Caml_option.some(match[1]), undefined, s);
}

function pop_de(s) {
  var match = pop(s);
  var arg = match[2];
  var arg$1 = match[3];
  return newState((function (param, param$1, param$2) {
                    return (function (param$3, param$4, param$5, param$6) {
                        return setRegisters(param, param$1, param$2, arg, arg$1, param$3, param$4, param$5, param$6);
                      });
                  })(undefined, undefined, undefined)(undefined, undefined, undefined, match[0]), Caml_option.some(match[1]), undefined, s);
}

function pop_hl(s) {
  var match = pop(s);
  var arg = match[2];
  var arg$1 = match[3];
  return newState((function (param, param$1, param$2, param$3, param$4) {
                    return (function (param$5, param$6) {
                        return setRegisters(param, param$1, param$2, param$3, param$4, arg, arg$1, param$5, param$6);
                      });
                  })(undefined, undefined, undefined, undefined, undefined)(undefined, match[0]), Caml_option.some(match[1]), undefined, s);
}

var Pop = /* module */[
  /* pop */pop,
  /* pop_af */pop_af,
  /* pop_bc */pop_bc,
  /* pop_de */pop_de,
  /* pop_hl */pop_hl
];

function isCarry(value) {
  return value > 65535;
}

function isHalfCarry(a, b) {
  return ((a & 15) + (b & 15) | 0) > 15;
}

var Add = /* module */[
  /* isCarry */isCarry,
  /* isHalfCarry */isHalfCarry
];

function add_hl(cpu, value) {
  var hl = rHl(cpu) + value | 0;
  var h = (hl >>> 8) & 255;
  var l = hl & 255;
  var bool = isHalfCarry(rHl(cpu), value);
  var partial_arg = bool ? 1 : 0;
  var bool$1 = hl > 65535;
  var partial_arg$1 = bool$1 ? 1 : 0;
  return /* tuple */[
          machineCycles(2, (function (eta) {
                    var param = undefined;
                    var param$1 = eta;
                    return setFlag$1(/* H */2, partial_arg, param, param$1);
                  })((function (eta) {
                        var param = undefined;
                        var param$1 = eta;
                        return setFlag$1(/* C */3, partial_arg$1, param, param$1);
                      })(cpu))),
          h,
          l
        ];
}

function add_hl_bc(s) {
  var cpu = s[/* cpu */0];
  var match = add_hl(cpu, rBc(cpu));
  var arg = match[1];
  var arg$1 = match[2];
  return newState((function (param, param$1, param$2, param$3, param$4) {
                    return (function (param$5, param$6) {
                        return setRegisters(param, param$1, param$2, param$3, param$4, arg, arg$1, param$5, param$6);
                      });
                  })(undefined, undefined, undefined, undefined, undefined)(undefined, match[0]), undefined, undefined, s);
}

function add_hl_de(s) {
  var cpu = s[/* cpu */0];
  var match = add_hl(cpu, rDe(cpu));
  var arg = match[1];
  var arg$1 = match[2];
  return newState((function (param, param$1, param$2, param$3, param$4) {
                    return (function (param$5, param$6) {
                        return setRegisters(param, param$1, param$2, param$3, param$4, arg, arg$1, param$5, param$6);
                      });
                  })(undefined, undefined, undefined, undefined, undefined)(undefined, match[0]), undefined, undefined, s);
}

function add_hl_hl(s) {
  var cpu = s[/* cpu */0];
  var match = add_hl(cpu, rHl(cpu));
  var arg = match[1];
  var arg$1 = match[2];
  return newState((function (param, param$1, param$2, param$3, param$4) {
                    return (function (param$5, param$6) {
                        return setRegisters(param, param$1, param$2, param$3, param$4, arg, arg$1, param$5, param$6);
                      });
                  })(undefined, undefined, undefined, undefined, undefined)(undefined, match[0]), undefined, undefined, s);
}

function add_hl_sp(s) {
  var cpu = s[/* cpu */0];
  var match = add_hl(cpu, cpu[/* registers */2][/* sp */8]);
  var arg = match[1];
  var arg$1 = match[2];
  return newState((function (param, param$1, param$2, param$3, param$4) {
                    return (function (param$5, param$6) {
                        return setRegisters(param, param$1, param$2, param$3, param$4, arg, arg$1, param$5, param$6);
                      });
                  })(undefined, undefined, undefined, undefined, undefined)(undefined, match[0]), undefined, undefined, s);
}

function add_sp_n(s) {
  var cpu = s[/* cpu */0];
  var match = Mmu$GameboyEmulator.read8(cpu[/* registers */2][/* pc */9], /* record */[
        /* gpu */s[/* gpu */2],
        /* mmu */s[/* mmu */1]
      ]);
  var partial_arg = Caml_option.some(match[1]);
  var partial_arg$1 = machineCycles(4, incrementPc(1, incrementSp(signed(match[0]), (function (eta) {
                    var param = undefined;
                    var param$1 = eta;
                    return setFlag$1(/* N */1, 0, param, param$1);
                  })((function (eta) {
                        var param = undefined;
                        var param$1 = eta;
                        return setFlag$1(/* Z */0, 0, param, param$1);
                      })(cpu)))));
  return (function (eta) {
              var param = undefined;
              var param$1 = eta;
              return newState(partial_arg$1, partial_arg, param, param$1);
            })(s);
}

var Add_16 = /* module */[
  /* isCarry */isCarry,
  /* isHalfCarry */isHalfCarry,
  /* add_hl */add_hl,
  /* add_hl_bc */add_hl_bc,
  /* add_hl_de */add_hl_de,
  /* add_hl_hl */add_hl_hl,
  /* add_hl_sp */add_hl_sp,
  /* add_sp_n */add_sp_n
];

function daa(s) {
  var cpu = s[/* cpu */0];
  var match = cpu[/* registers */2];
  var a = match[/* a */0];
  var f = match[/* f */7];
  var a$1 = (f & 32) !== 0 || (a & 15) > 9 ? a + 6 | 0 : a;
  cpu[/* registers */2][/* f */7] = cpu[/* registers */2][/* f */7] & 239;
  var match$1 = (cpu[/* registers */2][/* f */7] & 32) !== 0 || a$1 > 153 ? /* tuple */[
      a$1 + 96 | 0,
      cpu[/* registers */2][/* f */7] | 16
    ] : /* tuple */[
      a$1,
      cpu[/* registers */2][/* f */7]
    ];
  var a$2 = match$1[0] & 255;
  var arg = match$1[1];
  var arg$1 = function (param, param$1, param$2, param$3, param$4, param$5) {
    var partial_arg = a$2;
    return (function (param$6) {
        return setRegisters(partial_arg, param, param$1, param$2, param$3, param$4, param$5, arg, param$6);
      });
  };
  var cpu$1 = machineCycles(1, (function (eta) {
            var param = undefined;
            var param$1 = eta;
            return setFlag$1(/* C */3, 0, param, param$1);
          })((function (eta) {
                var param = undefined;
                var param$1 = eta;
                return setFlag$1(/* H */2, 0, param, param$1);
              })((function (eta) {
                    var param = undefined;
                    var param$1 = eta;
                    return setFlag$1(/* N */1, 0, param, param$1);
                  })((function (eta) {
                        return arg$1(undefined, undefined, undefined, undefined, undefined, undefined)(eta);
                      })(cpu)))));
  return newState(cpu$1, undefined, undefined, s);
}

function cpl(s) {
  var cpu = s[/* cpu */0];
  var a = cpu[/* registers */2][/* a */0] ^ 255;
  var partial_arg = a;
  var cpu$1 = machineCycles(1, (function (eta) {
            var param = undefined;
            var param$1 = eta;
            return setFlag$1(/* H */2, 1, param, param$1);
          })((function (eta) {
                var param = undefined;
                var param$1 = eta;
                return setFlag$1(/* N */1, 1, param, param$1);
              })((function (eta) {
                    var param = undefined;
                    var param$1 = undefined;
                    var param$2 = undefined;
                    var param$3 = undefined;
                    var param$4 = undefined;
                    var param$5 = undefined;
                    var param$6 = undefined;
                    var param$7 = eta;
                    return setRegisters(partial_arg, param, param$1, param$2, param$3, param$4, param$5, param$6, param$7);
                  })(cpu))));
  return newState(cpu$1, undefined, undefined, s);
}

function ccf(s) {
  var partial_arg = machineCycles(1, toggleFlag(/* C */3, (function (eta) {
                var param = undefined;
                var param$1 = eta;
                return setFlag$1(/* H */2, 0, param, param$1);
              })((function (eta) {
                    var param = undefined;
                    var param$1 = eta;
                    return setFlag$1(/* N */1, 0, param, param$1);
                  })(s[/* cpu */0]))));
  return (function (eta) {
              var param = undefined;
              var param$1 = undefined;
              var param$2 = eta;
              return newState(partial_arg, param, param$1, param$2);
            })(s);
}

function scf(s) {
  var partial_arg = machineCycles(1, (function (eta) {
            var param = undefined;
            var param$1 = eta;
            return setFlag$1(/* C */3, 1, param, param$1);
          })((function (eta) {
                var param = undefined;
                var param$1 = eta;
                return setFlag$1(/* H */2, 0, param, param$1);
              })((function (eta) {
                    var param = undefined;
                    var param$1 = eta;
                    return setFlag$1(/* N */1, 0, param, param$1);
                  })(s[/* cpu */0]))));
  return (function (eta) {
              var param = undefined;
              var param$1 = undefined;
              var param$2 = eta;
              return newState(partial_arg, param, param$1, param$2);
            })(s);
}

function halt(s) {
  var cpu = s[/* cpu */0];
  cpu[/* halt */1] = 1;
  return newState(cpu, undefined, undefined, s);
}

var Misc = /* module */[
  /* daa */daa,
  /* cpl */cpl,
  /* ccf */ccf,
  /* scf */scf,
  /* halt */halt
];

function jp_nn(s) {
  var cpu = s[/* cpu */0];
  var match = Mmu$GameboyEmulator.read16(cpu[/* registers */2][/* pc */9], /* record */[
        /* gpu */s[/* gpu */2],
        /* mmu */s[/* mmu */1]
      ]);
  cpu[/* registers */2][/* pc */9] = match[0];
  return newState(machineCycles(3, cpu), Caml_option.some(match[1]), undefined, s);
}

function jp_m_hl(s) {
  var cpu = s[/* cpu */0];
  cpu[/* registers */2][/* pc */9] = rHl(cpu);
  return newState(machineCycles(4, cpu), Caml_option.some(s[/* mmu */1]), undefined, s);
}

function jp_nz_nn(s) {
  var mmu = s[/* mmu */1];
  var cpu = s[/* cpu */0];
  var match;
  if (isSet(/* Z */0, cpu[/* registers */2][/* f */7])) {
    var pc$prime = cpu[/* registers */2][/* pc */9] + 2 | 0;
    match = /* tuple */[
      pc$prime,
      mmu,
      3
    ];
  } else {
    var match$1 = Mmu$GameboyEmulator.read16(cpu[/* registers */2][/* pc */9], /* record */[
          /* gpu */s[/* gpu */2],
          /* mmu */mmu
        ]);
    match = /* tuple */[
      match$1[0],
      match$1[1],
      4
    ];
  }
  cpu[/* registers */2][/* pc */9] = match[0];
  return newState(machineCycles(match[2], cpu), Caml_option.some(match[1]), undefined, s);
}

function jp_z_nn(s) {
  var mmu = s[/* mmu */1];
  var cpu = s[/* cpu */0];
  var match;
  if (isSet(/* Z */0, cpu[/* registers */2][/* f */7])) {
    var match$1 = Mmu$GameboyEmulator.read16(cpu[/* registers */2][/* pc */9], /* record */[
          /* gpu */s[/* gpu */2],
          /* mmu */mmu
        ]);
    match = /* tuple */[
      match$1[0],
      match$1[1],
      4
    ];
  } else {
    var pc$prime = cpu[/* registers */2][/* pc */9] + 2 | 0;
    match = /* tuple */[
      pc$prime,
      mmu,
      3
    ];
  }
  cpu[/* registers */2][/* pc */9] = match[0];
  return newState(machineCycles(match[2], cpu), Caml_option.some(match[1]), undefined, s);
}

function jp_nc_nn(s) {
  var mmu = s[/* mmu */1];
  var cpu = s[/* cpu */0];
  var match;
  if (isSet(/* C */3, cpu[/* registers */2][/* f */7])) {
    var pc$prime = cpu[/* registers */2][/* pc */9] + 2 | 0;
    match = /* tuple */[
      pc$prime,
      mmu,
      3
    ];
  } else {
    var match$1 = Mmu$GameboyEmulator.read16(cpu[/* registers */2][/* pc */9], /* record */[
          /* gpu */s[/* gpu */2],
          /* mmu */mmu
        ]);
    match = /* tuple */[
      match$1[0],
      match$1[1],
      4
    ];
  }
  cpu[/* registers */2][/* pc */9] = match[0];
  return newState(machineCycles(match[2], cpu), Caml_option.some(match[1]), undefined, s);
}

function jp_c_nn(s) {
  var mmu = s[/* mmu */1];
  var cpu = s[/* cpu */0];
  var match;
  if (isSet(/* C */3, cpu[/* registers */2][/* f */7])) {
    var match$1 = Mmu$GameboyEmulator.read16(cpu[/* registers */2][/* pc */9], /* record */[
          /* gpu */s[/* gpu */2],
          /* mmu */mmu
        ]);
    match = /* tuple */[
      match$1[0],
      match$1[1],
      4
    ];
  } else {
    var pc$prime = cpu[/* registers */2][/* pc */9] + 2 | 0;
    match = /* tuple */[
      pc$prime,
      mmu,
      3
    ];
  }
  cpu[/* registers */2][/* pc */9] = match[0];
  return newState(machineCycles(match[2], cpu), Caml_option.some(match[1]), undefined, s);
}

function jr_n(s) {
  var cpu = s[/* cpu */0];
  var match = Mmu$GameboyEmulator.read8(cpu[/* registers */2][/* pc */9], /* record */[
        /* gpu */s[/* gpu */2],
        /* mmu */s[/* mmu */1]
      ]);
  var partial_arg = Caml_option.some(match[1]);
  var partial_arg$1 = machineCycles(2, incrementPc(signed(match[0]) + 1 | 0, cpu));
  return (function (eta) {
              var param = undefined;
              var param$1 = eta;
              return newState(partial_arg$1, partial_arg, param, param$1);
            })(s);
}

function jr_nz_n(s) {
  var cpu = s[/* cpu */0];
  var pc = cpu[/* registers */2][/* pc */9];
  var match = Mmu$GameboyEmulator.read8(pc, /* record */[
        /* gpu */s[/* gpu */2],
        /* mmu */s[/* mmu */1]
      ]);
  var match$1 = isSet(/* Z */0, cpu[/* registers */2][/* f */7]) ? /* tuple */[
      pc + 1 | 0,
      2
    ] : /* tuple */[
      (pc + 1 | 0) + signed(match[0]) | 0,
      3
    ];
  var partial_arg = Caml_option.some(match[1]);
  var partial_arg$1 = machineCycles(match$1[1], incrementPc(match$1[0], cpu));
  return (function (eta) {
              var param = undefined;
              var param$1 = eta;
              return newState(partial_arg$1, partial_arg, param, param$1);
            })(s);
}

function jr_z_n(s) {
  var cpu = s[/* cpu */0];
  var pc = cpu[/* registers */2][/* pc */9];
  var match = Mmu$GameboyEmulator.read8(pc, /* record */[
        /* gpu */s[/* gpu */2],
        /* mmu */s[/* mmu */1]
      ]);
  var match$1 = isSet(/* Z */0, cpu[/* registers */2][/* f */7]) ? /* tuple */[
      (pc + 1 | 0) + signed(match[0]) | 0,
      3
    ] : /* tuple */[
      pc + 1 | 0,
      2
    ];
  var partial_arg = Caml_option.some(match[1]);
  var partial_arg$1 = machineCycles(match$1[1], incrementPc(match$1[0], cpu));
  return (function (eta) {
              var param = undefined;
              var param$1 = eta;
              return newState(partial_arg$1, partial_arg, param, param$1);
            })(s);
}

function jr_nc_n(s) {
  var cpu = s[/* cpu */0];
  var pc = cpu[/* registers */2][/* pc */9];
  var match = Mmu$GameboyEmulator.read8(pc, /* record */[
        /* gpu */s[/* gpu */2],
        /* mmu */s[/* mmu */1]
      ]);
  var match$1 = isSet(/* C */3, cpu[/* registers */2][/* f */7]) ? /* tuple */[
      pc + 1 | 0,
      2
    ] : /* tuple */[
      (pc + 1 | 0) + signed(match[0]) | 0,
      3
    ];
  var partial_arg = Caml_option.some(match[1]);
  var partial_arg$1 = machineCycles(match$1[1], incrementPc(match$1[0], cpu));
  return (function (eta) {
              var param = undefined;
              var param$1 = eta;
              return newState(partial_arg$1, partial_arg, param, param$1);
            })(s);
}

function jr_c_n(s) {
  var cpu = s[/* cpu */0];
  var pc = cpu[/* registers */2][/* pc */9];
  var match = Mmu$GameboyEmulator.read8(pc, /* record */[
        /* gpu */s[/* gpu */2],
        /* mmu */s[/* mmu */1]
      ]);
  var match$1 = isSet(/* C */3, cpu[/* registers */2][/* f */7]) ? /* tuple */[
      (pc + 1 | 0) + signed(match[0]) | 0,
      3
    ] : /* tuple */[
      pc + 1 | 0,
      2
    ];
  var partial_arg = Caml_option.some(match[1]);
  var partial_arg$1 = machineCycles(match$1[1], incrementPc(match$1[0], cpu));
  return (function (eta) {
              var param = undefined;
              var param$1 = eta;
              return newState(partial_arg$1, partial_arg, param, param$1);
            })(s);
}

var Jump = /* module */[
  /* jp_nn */jp_nn,
  /* jp_m_hl */jp_m_hl,
  /* jp_nz_nn */jp_nz_nn,
  /* jp_z_nn */jp_z_nn,
  /* jp_nc_nn */jp_nc_nn,
  /* jp_c_nn */jp_c_nn,
  /* jr_n */jr_n,
  /* jr_nz_n */jr_nz_n,
  /* jr_z_n */jr_z_n,
  /* jr_nc_n */jr_nc_n,
  /* jr_c_n */jr_c_n
];

function call(param) {
  var cpu = decrementSp(2, param[/* cpu */0]);
  var match = Mmu$GameboyEmulator.write16(cpu[/* registers */2][/* sp */8], cpu[/* registers */2][/* pc */9] + 2 | 0, /* record */[
        /* gpu */param[/* gpu */2],
        /* mmu */param[/* mmu */1]
      ]);
  var match$1 = Mmu$GameboyEmulator.read16(cpu[/* registers */2][/* pc */9], /* record */[
        /* gpu */match[1],
        /* mmu */match[0]
      ]);
  return /* tuple */[
          match$1[0],
          match$1[1]
        ];
}

function call_nn(s) {
  var match = call(s);
  var cpu = machineCycles(4, setPc(match[0], s[/* cpu */0]));
  return newState(cpu, Caml_option.some(match[1]), undefined, s);
}

function call_nz_nn(s) {
  var cpu = machineCycles(3, s[/* cpu */0]);
  var pc = cpu[/* registers */2][/* pc */9];
  var match;
  if (isSet(/* Z */0, cpu[/* registers */2][/* f */7])) {
    match = /* tuple */[
      pc + 2 | 0,
      s[/* mmu */1],
      0
    ];
  } else {
    var match$1 = call(s);
    match = /* tuple */[
      match$1[0],
      match$1[1],
      1
    ];
  }
  return newState(machineCycles(match[2], setPc(match[0], cpu)), Caml_option.some(match[1]), undefined, s);
}

var Call = /* module */[
  /* call */call,
  /* call_nn */call_nn,
  /* call_nz_nn */call_nz_nn
];

var Swap = /* module */[];

function cb_exec(s) {
  var cpu = s[/* cpu */0];
  var pc = cpu[/* registers */2][/* pc */9];
  var match = Mmu$GameboyEmulator.read8(pc, /* record */[
        /* gpu */s[/* gpu */2],
        /* mmu */s[/* mmu */1]
      ]);
  var cpu$1 = setPc(pc + 1 | 0, cpu);
  return newState(cpu$1, Caml_option.some(match[1]), undefined, s);
}

var Cb = /* module */[/* cb_exec */cb_exec];

var Ops = /* module */[
  /* newState */newState,
  /* nop */nop,
  /* Load_nn_8 */Load_nn_8,
  /* Load_r1_r2 */Load_r1_r2,
  /* Load_nn_16 */Load_nn_16,
  /* Load_8_A */Load_8_A,
  /* Load_A_8 */Load_A_8,
  /* Increment16 */Increment16,
  /* Increment8 */Increment8,
  /* Decrement8 */Decrement8,
  /* Decrement16 */Decrement16,
  /* Rotation */Rotation,
  /* Or */Or,
  /* Push */Push,
  /* Pop */Pop,
  /* Add */Add,
  /* Add_16 */Add_16,
  /* Misc */Misc,
  /* Jump */Jump,
  /* Call */Call,
  /* Swap */Swap,
  /* Cb */Cb
];

function exec(instruction) {
  switch (instruction) {
    case 1 : 
        return ld_bc_nn;
    case 2 : 
        return ld_m_bc_a;
    case 3 : 
        return inc_bc;
    case 4 : 
        return inc_b;
    case 5 : 
        return dec_b;
    case 6 : 
        return ld_b_n;
    case 7 : 
        return rlca;
    case 8 : 
        return ld_m_nn_sp;
    case 9 : 
        return add_hl_bc;
    case 10 : 
        return ld_a_m_bc;
    case 11 : 
        return dec_bc;
    case 12 : 
        return inc_c;
    case 13 : 
        return dec_c;
    case 14 : 
        return ld_c_n;
    case 15 : 
        return rrca;
    case 17 : 
        return ld_de_nn;
    case 18 : 
        return ld_m_de_a;
    case 19 : 
        return inc_de;
    case 20 : 
        return inc_d;
    case 21 : 
        return dec_d;
    case 22 : 
        return ld_d_n;
    case 23 : 
        return rla;
    case 24 : 
        return jr_n;
    case 25 : 
        return add_hl_de;
    case 26 : 
        return ld_a_m_de;
    case 27 : 
        return dec_de;
    case 28 : 
        return inc_e;
    case 29 : 
        return dec_e;
    case 30 : 
        return ld_e_n;
    case 31 : 
        return rra;
    case 32 : 
        return jr_nz_n;
    case 33 : 
        return ld_hl_nn;
    case 34 : 
        return ld_hli_a;
    case 35 : 
        return inc_hl;
    case 36 : 
        return inc_h;
    case 37 : 
        return dec_h;
    case 38 : 
        return ld_h_n;
    case 39 : 
        return daa;
    case 40 : 
        return jr_z_n;
    case 41 : 
        return add_hl_hl;
    case 42 : 
        return ld_a_m_hli;
    case 43 : 
        return dec_hl;
    case 44 : 
        return inc_l;
    case 45 : 
        return dec_l;
    case 46 : 
        return ld_l_n;
    case 47 : 
        return cpl;
    case 48 : 
        return jr_nc_n;
    case 49 : 
        return ld_sp_nn;
    case 50 : 
        return ld_hld_a;
    case 51 : 
        return inc_sp;
    case 53 : 
        return dec_m_hl;
    case 54 : 
        return ld_m_hl_n;
    case 55 : 
        return scf;
    case 56 : 
        return jr_c_n;
    case 57 : 
        return add_hl_sp;
    case 58 : 
        return ld_a_m_hld;
    case 59 : 
        return dec_sp;
    case 60 : 
        return inc_a;
    case 61 : 
        return dec_a;
    case 62 : 
        return ld_a_m_n;
    case 63 : 
        return ccf;
    case 64 : 
        return ld_b_b;
    case 65 : 
        return ld_b_c;
    case 66 : 
        return ld_b_d;
    case 67 : 
        return ld_b_e;
    case 68 : 
        return ld_b_h;
    case 69 : 
        return ld_b_l;
    case 70 : 
        return ld_b_m_hl;
    case 71 : 
        return ld_b_a;
    case 72 : 
        return ld_c_b;
    case 73 : 
        return ld_c_c;
    case 74 : 
        return ld_c_d;
    case 75 : 
        return ld_c_e;
    case 76 : 
        return ld_c_h;
    case 77 : 
        return ld_c_l;
    case 78 : 
        return ld_c_m_hl;
    case 79 : 
        return ld_c_a;
    case 80 : 
        return ld_d_b;
    case 81 : 
        return ld_d_c;
    case 82 : 
        return ld_d_d;
    case 83 : 
        return ld_d_e;
    case 84 : 
        return ld_d_h;
    case 85 : 
        return ld_d_l;
    case 86 : 
        return ld_d_m_hl;
    case 87 : 
        return ld_d_a;
    case 88 : 
        return ld_e_b;
    case 89 : 
        return ld_e_c;
    case 90 : 
        return ld_e_d;
    case 91 : 
        return ld_e_e;
    case 92 : 
        return ld_e_h;
    case 93 : 
        return ld_e_l;
    case 94 : 
        return ld_e_m_hl;
    case 95 : 
        return ld_e_a;
    case 96 : 
        return ld_h_b;
    case 97 : 
        return ld_h_c;
    case 98 : 
        return ld_h_d;
    case 99 : 
        return ld_h_e;
    case 100 : 
        return ld_h_h;
    case 101 : 
        return ld_h_l;
    case 102 : 
        return ld_h_m_hl;
    case 103 : 
        return ld_h_a;
    case 104 : 
        return ld_l_b;
    case 105 : 
        return ld_l_c;
    case 106 : 
        return ld_l_d;
    case 107 : 
        return ld_l_e;
    case 108 : 
        return ld_l_h;
    case 109 : 
        return ld_l_l;
    case 110 : 
        return ld_l_m_hl;
    case 111 : 
        return ld_l_a;
    case 112 : 
        return ld_m_hl_b;
    case 113 : 
        return ld_m_hl_c;
    case 114 : 
        return ld_m_hl_d;
    case 115 : 
        return ld_m_hl_e;
    case 116 : 
        return ld_m_hl_h;
    case 117 : 
        return ld_m_hl_l;
    case 118 : 
        return halt;
    case 119 : 
        return ld_m_hl_a;
    case 120 : 
        return ld_a_b;
    case 121 : 
        return ld_a_c;
    case 122 : 
        return ld_a_d;
    case 123 : 
        return ld_a_e;
    case 124 : 
        return ld_a_h;
    case 125 : 
        return ld_a_l;
    case 126 : 
        return ld_a_m_hl;
    case 127 : 
        return ld_a_a;
    case 176 : 
        return or_b;
    case 177 : 
        return or_c;
    case 178 : 
        return or_d;
    case 179 : 
        return or_e;
    case 180 : 
        return or_h;
    case 181 : 
        return or_l;
    case 183 : 
        return or_a;
    case 193 : 
        return pop_bc;
    case 194 : 
        return jp_nz_nn;
    case 195 : 
        return jp_nn;
    case 196 : 
        return call_nz_nn;
    case 197 : 
        return push_bc;
    case 202 : 
        return jp_z_nn;
    case 203 : 
        return cb_exec;
    case 205 : 
        return call_nn;
    case 209 : 
        return pop_de;
    case 210 : 
        return jp_nc_nn;
    case 213 : 
        return push_de;
    case 218 : 
        return jp_c_nn;
    case 224 : 
        return ldh_n_a;
    case 225 : 
        return pop_hl;
    case 226 : 
        return ld_m_c_a;
    case 229 : 
        return push_hl;
    case 232 : 
        return add_sp_n;
    case 233 : 
        return jp_m_hl;
    case 234 : 
        return ld_m_nn_a;
    case 240 : 
        return ldh_a_n;
    case 241 : 
        return pop_af;
    case 242 : 
        return ld_a_m_c;
    case 245 : 
        return push_af;
    case 248 : 
        return ld_hl_sp_n;
    case 249 : 
        return ld_sp_hl;
    case 250 : 
        return ld_a_m_nn;
    case 0 : 
    case 16 : 
    case 52 : 
    case 128 : 
    case 129 : 
    case 130 : 
    case 131 : 
    case 132 : 
    case 133 : 
    case 134 : 
    case 135 : 
    case 136 : 
    case 137 : 
    case 138 : 
    case 139 : 
    case 140 : 
    case 141 : 
    case 142 : 
    case 143 : 
    case 144 : 
    case 145 : 
    case 146 : 
    case 147 : 
    case 148 : 
    case 149 : 
    case 150 : 
    case 151 : 
    case 152 : 
    case 153 : 
    case 154 : 
    case 155 : 
    case 156 : 
    case 157 : 
    case 158 : 
    case 159 : 
    case 160 : 
    case 161 : 
    case 162 : 
    case 163 : 
    case 164 : 
    case 165 : 
    case 166 : 
    case 167 : 
    case 168 : 
    case 169 : 
    case 170 : 
    case 171 : 
    case 172 : 
    case 173 : 
    case 174 : 
    case 175 : 
    case 182 : 
    case 184 : 
    case 185 : 
    case 186 : 
    case 187 : 
    case 188 : 
    case 189 : 
    case 190 : 
    case 191 : 
    case 192 : 
    case 198 : 
    case 199 : 
    case 200 : 
    case 201 : 
    case 204 : 
    case 206 : 
    case 207 : 
    case 208 : 
    case 211 : 
    case 212 : 
    case 214 : 
    case 215 : 
    case 216 : 
    case 217 : 
    case 219 : 
    case 220 : 
    case 221 : 
    case 222 : 
    case 223 : 
    case 227 : 
    case 228 : 
    case 230 : 
    case 231 : 
    case 235 : 
    case 236 : 
    case 237 : 
    case 238 : 
    case 239 : 
    case 243 : 
    case 244 : 
    case 246 : 
    case 247 : 
    case 251 : 
    case 252 : 
    case 253 : 
    case 254 : 
    case 255 : 
        return nop;
    default:
      throw [
            UnhandledInstruction,
            Curry._1(Printf.sprintf(/* Format */[
                      /* String_literal */Block.__(11, [
                          "Unhandled instruction, ",
                          /* Int */Block.__(4, [
                              /* Int_Cx */7,
                              /* Lit_padding */Block.__(0, [
                                  /* Right */1,
                                  2
                                ]),
                              /* No_precision */0,
                              /* End_of_format */0
                            ])
                        ]),
                      "Unhandled instruction, %#2x"
                    ]), instruction)
          ];
  }
}

exports.UnhandledInstruction = UnhandledInstruction;
exports.AssertionException = AssertionException;
exports.Flags = Flags;
exports.make = make;
exports.b2i = b2i;
exports.programCount = programCount;
exports.readRegister16 = readRegister16;
exports.rAf = rAf;
exports.rBc = rBc;
exports.rDe = rDe;
exports.rHl = rHl;
exports.checkRegister = checkRegister;
exports.setRegisters = setRegisters;
exports.writeRegister16 = writeRegister16;
exports.wHl = wHl;
exports.incrementPc = incrementPc;
exports.setPc = setPc;
exports.incrementSp = incrementSp;
exports.decrementSp = decrementSp;
exports.setSp = setSp;
exports.getFlag = getFlag$1;
exports.setFlag = setFlag$1;
exports.toggleFlag = toggleFlag;
exports.machineCycles = machineCycles;
exports.cycles = cycles;
exports.incrementHl = incrementHl;
exports.decrementHl = decrementHl;
exports.signed = signed;
exports.Ops = Ops;
exports.exec = exec;
/* Mmu-GameboyEmulator Not a pure module */
